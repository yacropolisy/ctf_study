<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0072)https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BV.2FpnLHaEMGptQTCM- -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="robots" content="index,nofollow">

<title>CTF/Toolkit/z3py - 電気通信大学MMA</title>
<script type="text/javascript" src="./z3py_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "検索";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./z3py_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="./z3py_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="./z3py_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./z3py_files/markdown-highlight.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/MoinMoinStatic/mmatheme/css/msie.css">
<![endif]-->


<link rel="alternate" title="電気通信大学MMA: CTF/Toolkit/z3py" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=CTF%2FToolkit%2Fz3py&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="https://wiki.mma.club.uec.ac.jp/Home">
<link rel="Alternate" title="Wikiマークアップ" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?action=raw">
<link rel="Alternate" media="print" title="印刷ビュー" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?action=print">
<link rel="Up" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit">
<link rel="Appendix" title="ToInt-ToReal.png" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?action=AttachFile&amp;do=view&amp;target=ToInt-ToReal.png">
<link rel="Search" href="https://wiki.mma.club.uec.ac.jp/%E3%83%9A%E3%83%BC%E3%82%B8%E6%A4%9C%E7%B4%A2">
<link rel="Index" href="https://wiki.mma.club.uec.ac.jp/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9">
<link rel="Glossary" href="https://wiki.mma.club.uec.ac.jp/%E5%8D%98%E8%AA%9E%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9">
<link rel="Help" href="https://wiki.mma.club.uec.ac.jp/%E6%9B%B8%E5%BC%8F%E3%81%AE%E3%83%98%E3%83%AB%E3%83%97">
<style type="text/css">#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-family: serif; font-style: normal; font-size: 90%}
.MathJax_Preview {color: #888888}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-family: serif; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; border: 0; padding: 0; margin: 0}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0 !important; padding: 0 !important; margin: 0 !important; vertical-align: 0 !important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap}
.MathJax img {display: inline ! important}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax .MathJax_HitBox {cursor: text}
#MathJax_Tooltip * {filter: none; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf')}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf')}
@font-face {font-family: MathJax_Size1; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf')}
@font-face {font-family: MathJax_Size2; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf')}
@font-face {font-family: MathJax_Size3; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf')}
@font-face {font-family: MathJax_Size4; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/1.1a/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf')}
#MathJax_getScales {font-family: MathJax_Main,MathJax_Size1,MathJax_AMS}
.MathJax .math span {font-family: MathJax_Main,MathJax_Size1,MathJax_AMS}
</style></head>

<body lang="ja" dir="ltr"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<div id="user">
<div id="username"><span><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?action=login" id="login" rel="nofollow">ログイン</a></span></div>
</div>
<div id="search">

<div id="searchbox">
<form id="searchform" method="get" action="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput" style="display: none;">検索:</label>
<input id="searchinput" type="text" name="value" value="" size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search" class="disabled">
<input id="fullsearch" name="fullsearch" type="submit" value="テキスト" alt="Search Full Text" disabled="">
<input id="titlesearch" name="titlesearch" type="submit" value="タイトル" alt="Search Titles" disabled="">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>
</div>

</div>
<div id="logo"><a href="https://wiki.mma.club.uec.ac.jp/Home"><img src="./z3py_files/logo.png" alt="電気通信大学MMA"></a></div>
<div id="wikipanel">

<div id="navibar">
<div class="wikilink">目次</div><span class="wikilink"><a href="https://wiki.mma.club.uec.ac.jp/%E6%9B%B4%E6%96%B0%E5%B1%A5%E6%AD%B4">更新履歴</a></span><span class="panelbar"> | </span><span class="wikilink"><a href="https://wiki.mma.club.uec.ac.jp/%E3%83%9A%E3%83%BC%E3%82%B8%E6%A4%9C%E7%B4%A2">ページの検索</a></span><span class="panelbar"> | </span><span class="wikilink"><a href="https://wiki.mma.club.uec.ac.jp/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9">ページの一覧</a></span><span class="panelbar"> | </span><span class="wikilink"><a href="https://wiki.mma.club.uec.ac.jp/Tasks">タスクリスト</a></span><span class="panelbar"> | </span><span class="wikilink"><a href="https://wiki.mma.club.uec.ac.jp/WhiteBoard">ホワイトボード</a></span><span class="panelbar"> | </span><span class="wikilink"><a href="https://wiki.mma.club.uec.ac.jp/bbs">掲示板</a></span><div class="userlink">クイックリンク</div><span class="current"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py">CTF/Toolkit/z3py</a></span>
</div>

<div id="custom_sidebar">


</div>
</div>
<div id="pagepanel">
<div class="editbar"><span><span class="disabled">編集不可のページ</span></span><span class="toggleCommentsButton" style=""><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" class="nbcomment" onclick="toggleComments();return false;">コメント</a></span><span><span class="disabled">ディスカッション</span></span><span><a class="nbinfo" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?action=info" rel="nofollow">情報</a></span><span><a class="nbattachments" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?action=AttachFile" rel="nofollow">添付ファイル</a></span><span>
<form class="actionsmenu" method="GET" action="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show">その他のアクション:</option><option value="raw">Wikiテキスト</option>
<option value="print">印刷ビュー</option>
<option value="RenderAsDocbook">Docbookで表示</option>
<option value="refresh">キャッシュ削除</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="SpellCheck">スペルチェック</option>
<option value="LikePages">似たページ</option>
<option value="LocalSiteMap">ローカルサイトマップ</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="RenamePage" disabled="" class="disabled">ページ名変更</option>
<option value="DeletePage" disabled="" class="disabled">ページ削除</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">購読ユーザ追加</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">スパム削除</option>
<option value="show" disabled="" class="disabled">このリビジョンに戻す</option>
<option value="PackagePages">ページパッケージ化</option>
<option value="SyncPages">ページ同期</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="Load">ロード</option>
<option value="Save">保存</option>
<option value="SlideShow">SlideShow</option>
    </select>
    
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('その他のアクション:');
//-->
</script>
</form>
</span></div>

</div>

<!--[if IE]>
<div style="border: 1px solid rgb(123, 98, 75); color: rgb(123, 98, 75); margin: 0pt 10px 0pt 170px; height: 140px; line-height: 1.7em;">
<div style="width: 100%; position: relative; overflow: hidden;">
<div style="position: absolute; right: 70px; bottom: -10px;"><img alt="Wildehead.PNG" src="/すべての人にブラウザの贈り物を?action=AttachFile&do=get&target=MrMMA.png"></div>
<div style="position: absolute; bottom: 15px; right: 15px;">
<div style="text-align: center; margin: 0.5em;"><span style="padding: 0.2em; font-weight: bold; cursor: default; border: 2px solid rgb(102, 102, 102);"><a href="/すべての人にブラウザの贈り物を" title="MMA:すべての人にブラウザの贈り物を"><span title="Read Now">読む</span></a></span></div>
</div>
<div style="width: 100%; display: block; position: static; padding: 1em; color: rgb(255, 247, 191); font-size: 30px; text-align: left; font-weight: bold;">
<a href="/すべての人にブラウザの贈り物を" title="MMA:すべての人にブラウザの贈り物を">電気通信大学 MMA部<br>ウェブ管理担当 からの<br>メッセージをお読みください</a></div>
</div>
</div>
</div>
</div>
<![endif]-->


<div id="location">

<div id="pagelocation"><span class="pagepath"><a href="https://wiki.mma.club.uec.ac.jp/CTF">CTF</a><span class="sep">/</span><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit">Toolkit</a></span><span class="sep">/</span><a class="backlink" href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py?action=fullsearch&amp;value=linkto%3A%22CTF%2FToolkit%2Fz3py%22&amp;context=180" rel="nofollow" title="このタイトルで全文検索をするには、ここをクリックしてください">z3py</a></div>

</div>
<div id="page" lang="ja" dir="ltr">

<style type="text/css">
#logoforprint {
    display: none;
    text-align: center;
    /*border: 1px solid #A3A8AB;
    border-left: none;
    border-right: none;*/
}

#logoforprint hr {
    height: 1px;
    background-color: #A3A8AB;
    border-bottom: 1px solid #A3A8AB;
    display: block !important;
}

@media print {
#logoforprint{
    display: block !important;
}

}
</style>
<div id="logoforprint">
    <hr style="position: relative; top: 0.75em;">
    <img src="./z3py_files/logo_print.png" alt="MMA" style="position: relative; top: -0.5em;">
</div>
<div dir="ltr" id="content" lang="ja"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867">
<script src="./z3py_files/MathJax.js" id=""></script>
  
        <script type="text/x-mathjax-config;executed=true"> 
                  MathJax.Hub.Config({ 
                    extensions: ["tex2jax.js"], 
                    jax: ["input/TeX", "output/HTML-CSS"], 
                    tex2jax: { 
  inlineMath: [ ['$','$'] ], displayMath: [ ['$$','$$'] ], 
                      processEscapes: true 
                    }, 
                    "HTML-CSS": { availableFonts: ["TeX"] } 
                  }); 
        </script>  <span class="anchor" id="line-2"></span>
</p><h1 id="z3py">z3py</h1>
<span class="anchor" id="line-3"></span><p class="line874">Z3はMicrosoft Researchが開発したSAT・SMTソルバである． <span class="anchor" id="line-4"></span>ブール代数の充足問題に限らず，整数や実数上の不等式を含む充足問題にも適用できる． <span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span></p><p class="line874">z3pyはZ3のPythonバインディングであり，Z3に付属している． <span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span></p><p class="line874">本稿は迅速な問題解決のためのz3pyの逆引き事典を目指して執筆された。  <span class="anchor" id="line-9"></span>各機能の詳細はz3pyのhelpドキュメント，あるいは<a class="http" href="http://research.microsoft.com/en-us/um/redmond/projects/z3/namespacez3py.html">それをHTMLにまとめたもの</a>を参照されたし．なお，<a class="http" href="http://rise4fun.com/z3py">rise4funにチュートリアルもある</a>らしいのだが接続できたことがない． <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">目次</p><ol><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#z3py">z3py</a><ol><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMKQw8zC5MMgw.2FDDr-">インストール</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BV.2FpnLHaEMGptQTCM-">基本的な流れ</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BWQllcDBuT1xiEA-">変数の作成</a><ol><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNYw.2FDDrWQllcDCST1wwiw-">ブール変数を作る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BZXRlcFkJZXAwkk9cMIs-">整数変数を作る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BW59lcFkJZXAwkk9cMIs-">実数変数を作る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNMwwzDIMNkwrzDIMOtZCWVwMJJPXDCL-">ビットベクトル変数を作る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUhdjGVeLWQllcDCST1wwiw-">列挙型変数を作る</a></li></ol></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUjZ9BDBuii1bmg-">制約の設定</a><ol><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUjZ9BDBuj.2F1SoA-">制約の追加</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BitZ0Bg-AND">論理AND</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BitZ0Bg-OR">論理OR</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BitZ0Bg-XOR">論理XOR</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BitZ0Bg-NOT">論理NOT</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#Implies_.28.3D.3E.2C_.2BMGowiTBw.29">Implies (=&gt;, ならば)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BVAxQJA.28Equals.29">同値(Equals)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BTg17SV8P-">不等式</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2Be5eIU28Ue5c-">算術演算</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUWgwZnVwMGowi1AkMJJjATBk.28Distinct.29">全て異なる値を持つ(Distinct)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BZ2FO9lIGXJA.28If.29">条件分岐(If)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BV4swblkJY9s.28Int_.3C-.3E_Real.29">型の変換(Int &lt;-&gt; Real)</a></li></ol></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUjZ9BDBuii1bmg.28.2BMNMwwzDIMNkwrzDIMOs.29">制約の設定(ビットベクトル)</a><ol><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2Be5eIU28Ue5c.28.2BeyZT907YME0.29">算術演算(符号付き)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2Be5eIU28Ue5c.28.2BeyZT93EhMFc.29">算術演算(符号無し)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BTg17SVP3.28.2BeyZT907YME0.29">不等号(符号付き)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BTg17SVP3.28.2BeyZT93EhMFc.29">不等号(符号無し)</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNMwwzDI-AND.2C_.2BMNMwwzDI-OR.2C_.2BMNMwwzDI-XOR.2C_.2BMNMwwzDI-NOT">ビットAND, ビットOR, ビットXOR, ビットNOT</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNMwwzDIMLcw1TDI-">ビットシフト</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BVt6O4jC3MNUwyA-">回転シフト</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMLww7WLhXzU-">ゼロ拡張</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BeyZT92LhXzU-">符号拡張</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BkOhSBjDTMMMwyFIXMG5SBzCKUfowVw-">部分ビット列の切り出し</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNMwwzDIMNkwrzDIMOswSzCJZXRlcFeLMGtZCWPb-">ビットベクトルから整数型に変換</a></li></ol></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUUWNs1PvgP1gJzCSUiRbmjBZMItluWzV-">充足可能性を判定する方法</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUUWNs4njMJJflzCLZbls1Q-">充足解を得る方法</a><ol><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNYw.2FDDrWQllcDBuieMwkl.2BXMIs-">ブール変数の解を得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BZXRlcFkJZXAwbonjMJJflzCL-">整数変数の解を得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BW59lcFkJZXAwbonjMJJrY3i6MGpnCXQGZXAwaDBXMGZflzCL-">実数変数の解を正確な有理数として得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BW59lcFkJZXAwbonjMJKP0U88MFUwjDBfZwl0BmVwMGgwVzBmX5cwiw-">実数変数の解を近似された有理数として得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BW59lcFkJZXAwbonjMJJtblLVXA9lcHC5ZXAwaDBXMGZflzCL-">実数変数の解を浮動小数点数として得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNMwwzDIMNkwrzDIMOtZCWVwMG6J4zCSeyZT907YME0wbmV0ZXAwaDBXMGZflzCL-">ビットベクトル変数の解を符号付きの整数として得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BMNMwwzDIMNkwrzDIMOtZCWVwMG6J4zCSeyZT93EhMFcwbmV0ZXAwaDBXMGZflzCL-">ビットベクトル変数の解を符号無しの整数として得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUhdjGVeLWQllcDBuieMwklIXYxlXizBuiYF9IDBuVA158DBoMFcwZl.2BXMIs-">列挙型変数の解を列挙型の要素の名称として得る</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BUhdjGVeLWQllcDBuieMwaImBfSAwblQMUCRgJzCSUiRbmjBZMIs-">列挙型変数の解と要素の同値性を判定する</a></li></ol></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BT4s-">例</a><ol><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2Bm1RluZZj-">魔方陣</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BhmuY3zBEe5c-">虫食い算</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#PlaidCTF_2015_RE_GEX">PlaidCTF 2015 RE GEX</a></li><li>
<a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#A.2BZXRlcIoIdTtVT5hM-">整数計画問題</a></li></ol></li></ol></li></ol></div> <span class="anchor" id="line-12"></span>
<h2 id="A.2BMKQw8zC5MMgw.2FDDr-">インストール</h2>
<span class="anchor" id="line-13"></span><p class="line867"><a class="https" href="https://github.com/Z3Prover/z3">Z3のGithubページ</a>からgit cloneしてビルド・インストールする． <span class="anchor" id="line-14"></span>z3pyは <tt class="backtick">/usr/lib/python2.7/dist-packages</tt> 以下に同時にインストールされる． <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span></p><p class="line867">
</p><h2 id="A.2BV.2FpnLHaEMGptQTCM-">基本的な流れ</h2>
<span class="anchor" id="line-17"></span><p class="line867"><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-1-1"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b870cf6136cfb319c6975b78f641be2ab89b2e58\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-b870cf6136cfb319c6975b78f641be2ab89b2e58&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_1">   1</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_1"></span><span class="anchor" id="line-1-2"></span><span class="Comment"># モジュールをimport</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_2">   2</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_2"></span><span class="anchor" id="line-2-1"></span><span class="ResWord">from</span> <span class="ID">z3</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_3">   3</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_3"></span><span class="anchor" id="line-3-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_4">   4</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_4"></span><span class="anchor" id="line-4-1"></span><span class="Comment"># 変数を作成．引数は人間が見てわかりやすい変数名．</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_5">   5</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_5"></span><span class="anchor" id="line-5-1"></span><span class="ID">p</span>, <span class="ID">q</span> = <span class="ID">Bools</span>([<span class="String">"</span><span class="String">p</span><span class="String">"</span>, <span class="String">"</span><span class="String">q</span><span class="String">"</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_6">   6</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_6"></span><span class="anchor" id="line-6-1"></span><span class="ID">x</span> = <span class="ID">Int</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_7">   7</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_7"></span><span class="anchor" id="line-7-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_8">   8</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_8"></span><span class="anchor" id="line-8-1"></span><span class="Comment"># ソルバのインスタンスを生成して</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_9">   9</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_9"></span><span class="anchor" id="line-9-1"></span><span class="ID">s</span> = <span class="ID">Solver</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_10">  10</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_10"></span><span class="anchor" id="line-10-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_11">  11</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_11"></span><span class="anchor" id="line-11-1"></span><span class="Comment"># 制約を追加</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_12">  12</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_12"></span><span class="anchor" id="line-12-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">q</span> == <span class="ResWord">True</span>, <span class="ID">p</span> != <span class="ID">q</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_13">  13</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_13"></span><span class="anchor" id="line-13-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">x</span> * <span class="ID">x</span> - <span class="ID">x</span> == <span class="Number">2</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_14">  14</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_14"></span><span class="anchor" id="line-14-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_15">  15</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_15"></span><span class="anchor" id="line-15-1"></span><span class="Comment"># 解を探索，モデルを取得</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_16">  16</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_16"></span><span class="anchor" id="line-16-1"></span><span class="ID">r</span> = <span class="ID">s</span>.<span class="ID">check</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_17">  17</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_17"></span><span class="anchor" id="line-17-1"></span><span class="ResWord">if</span> <span class="ID">r</span> == <span class="ID">sat</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_18">  18</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_18"></span><span class="anchor" id="line-18-1"></span>    <span class="ID">m</span> = <span class="ID">s</span>.<span class="ID">model</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_19">  19</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_19"></span><span class="anchor" id="line-19-1"></span><span class="ResWord">else</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_20">  20</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_20"></span><span class="anchor" id="line-20-1"></span>    <span class="ResWord">print</span> <span class="ID">r</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_21">  21</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_21"></span><span class="anchor" id="line-21-1"></span>    <span class="Comment"># exit(1)</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_22">  22</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_22"></span><span class="anchor" id="line-22-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_23">  23</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_23"></span><span class="anchor" id="line-23-1"></span><span class="Comment"># 解を取得</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_24">  24</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_24"></span><span class="anchor" id="line-24-1"></span><span class="ID">solution_p</span> = <span class="ID">is_true</span>(<span class="ID">m</span>[<span class="ID">p</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_25">  25</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_25"></span><span class="anchor" id="line-25-1"></span><span class="ID">solution_x</span> = <span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">as_long</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_26">  26</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_26"></span><span class="anchor" id="line-26-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_27">  27</a> </span><span class="LineAnchor" id="CA-b870cf6136cfb319c6975b78f641be2ab89b2e58_27"></span><span class="anchor" id="line-27-1"></span><span class="ResWord">print</span> <span class="ID">solution_p</span>, <span class="ID">solution_x</span></span>
</pre></div></div><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><p class="line862">コンソール上での作業であれば<tt class="backtick">Solver</tt>の生成から<tt class="backtick">add</tt>, <tt class="backtick">check</tt>, <tt class="backtick">model</tt><strong>の表示</strong>までを一度に行ってくれる便利関数<tt class="backtick">solve</tt>も利用できる．モデルを返すのではなく表示してしまう辺りとても使いづらい． <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-1-3"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-da7b68195147cc2591ce1380dba667e9068eda0e\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-da7b68195147cc2591ce1380dba667e9068eda0e&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-da7b68195147cc2591ce1380dba667e9068eda0e" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-da7b68195147cc2591ce1380dba667e9068eda0e_1">   1</a> </span><span class="LineAnchor" id="CA-da7b68195147cc2591ce1380dba667e9068eda0e_1"></span><span class="anchor" id="line-1-4"></span>&gt;&gt;&gt; <span class="ResWord">from</span> <span class="ID">z3</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-da7b68195147cc2591ce1380dba667e9068eda0e_2">   2</a> </span><span class="LineAnchor" id="CA-da7b68195147cc2591ce1380dba667e9068eda0e_2"></span><span class="anchor" id="line-2-2"></span>&gt;&gt;&gt; <span class="ID">p</span>, <span class="ID">q</span> = <span class="ID">Bools</span>([<span class="String">"</span><span class="String">p</span><span class="String">"</span>, <span class="String">"</span><span class="String">q</span><span class="String">"</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-da7b68195147cc2591ce1380dba667e9068eda0e_3">   3</a> </span><span class="LineAnchor" id="CA-da7b68195147cc2591ce1380dba667e9068eda0e_3"></span><span class="anchor" id="line-3-2"></span>&gt;&gt;&gt; <span class="ID">solve</span>(<span class="ID">p</span> == <span class="ResWord">True</span>, <span class="ID">p</span> != <span class="ID">q</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-da7b68195147cc2591ce1380dba667e9068eda0e_4">   4</a> </span><span class="LineAnchor" id="CA-da7b68195147cc2591ce1380dba667e9068eda0e_4"></span><span class="anchor" id="line-4-2"></span>[<span class="ID">q</span> = <span class="ResWord">False</span>, <span class="ID">p</span> = <span class="ResWord">True</span>]</span>
</pre></div></div><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line867">
</p><h2 id="A.2BWQllcDBuT1xiEA-">変数の作成</h2>
<span class="anchor" id="line-56"></span><p class="line867">
</p><h3 id="A.2BMNYw.2FDDrWQllcDCST1wwiw-">ブール変数を作る</h3>
<span class="anchor" id="line-57"></span><p class="line867">
</p><h4 id="A.2BTgAwZE9cYhA-">一つ作成</h4>
<span class="anchor" id="line-58"></span><p class="line867"><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-1-5"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e24db095487bfd493e23b3558fb2496f669c893b\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-e24db095487bfd493e23b3558fb2496f669c893b&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-e24db095487bfd493e23b3558fb2496f669c893b" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-e24db095487bfd493e23b3558fb2496f669c893b_1">   1</a> </span><span class="LineAnchor" id="CA-e24db095487bfd493e23b3558fb2496f669c893b_1"></span><span class="anchor" id="line-1-6"></span><span class="ID">x</span> = <span class="ID">Bool</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>)</span>
</pre></div></div><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><p class="line867">
</p><h4 id="A.2BiQdlcFQMZkJPXGIQ-">複数同時作成</h4>
<span class="anchor" id="line-63"></span><p class="line874">変数名をスペースで区切って渡すか <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-1-7"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e0b7bfe6166c113d350e6ae8890a3972c4fc5fac\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-e0b7bfe6166c113d350e6ae8890a3972c4fc5fac&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-e0b7bfe6166c113d350e6ae8890a3972c4fc5fac" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-e0b7bfe6166c113d350e6ae8890a3972c4fc5fac_1">   1</a> </span><span class="LineAnchor" id="CA-e0b7bfe6166c113d350e6ae8890a3972c4fc5fac_1"></span><span class="anchor" id="line-1-8"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Bools</span>(<span class="String">"</span><span class="String">x y</span><span class="String">"</span>)</span>
</pre></div></div><span class="anchor" id="line-67"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-1-9"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-61d9eb150f79ff0f5ac07b99c7644828f682b9d7\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-61d9eb150f79ff0f5ac07b99c7644828f682b9d7&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-61d9eb150f79ff0f5ac07b99c7644828f682b9d7" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-61d9eb150f79ff0f5ac07b99c7644828f682b9d7_1">   1</a> </span><span class="LineAnchor" id="CA-61d9eb150f79ff0f5ac07b99c7644828f682b9d7_1"></span><span class="anchor" id="line-1-10"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Bools</span>([<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="String">"</span><span class="String">y</span><span class="String">"</span>])</span>
</pre></div></div><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><p class="line867">
</p><h4 id="A.2BkU1SFzBnVAxmQk9cYhA-">配列で同時作成</h4>
<span class="anchor" id="line-73"></span><p class="line874">変数を128個含むリストを生成するには次のようにする． <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-1-11"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-0267d7d3de03f51565e330f63dc1a9ee950de897\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-0267d7d3de03f51565e330f63dc1a9ee950de897&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-0267d7d3de03f51565e330f63dc1a9ee950de897" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-0267d7d3de03f51565e330f63dc1a9ee950de897_1">   1</a> </span><span class="LineAnchor" id="CA-0267d7d3de03f51565e330f63dc1a9ee950de897_1"></span><span class="anchor" id="line-1-12"></span><span class="ID">xs</span> = <span class="ID">BoolVector</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="Number">128</span>)</span>
</pre></div></div><span class="anchor" id="line-77"></span><p class="line862">変数名には，与えた変数名に続けて<tt class="backtick">__0</tt>, <tt class="backtick">__1</tt>, ...と番号が追加される． <span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span></p><p class="line874">あるいはPythonのリストの内包記法を用いて次のようにすればよい． <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-1-13"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b62e6a9325cff12385fb2783362dbef5ba804f02\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-b62e6a9325cff12385fb2783362dbef5ba804f02&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-b62e6a9325cff12385fb2783362dbef5ba804f02" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b62e6a9325cff12385fb2783362dbef5ba804f02_1">   1</a> </span><span class="LineAnchor" id="CA-b62e6a9325cff12385fb2783362dbef5ba804f02_1"></span><span class="anchor" id="line-1-14"></span><span class="ID">xs</span> = [<span class="ID">Bool</span>(<span class="String">"</span><span class="String">x</span><span class="String">%d</span><span class="String">"</span> % <span class="ID">i</span>) <span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">128</span>)]</span>
</pre></div></div><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><p class="line867">
</p><h3 id="A.2BZXRlcFkJZXAwkk9cMIs-">整数変数を作る</h3>
<span class="anchor" id="line-86"></span><p class="line867">
</p><h4 id="A.2BTgAwZE9cYhA--1">一つ作成</h4>
<span class="anchor" id="line-87"></span><p class="line867"><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-1-15"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e3063c52b61c838967b9f31ea0ae0e66d90078bb\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-e3063c52b61c838967b9f31ea0ae0e66d90078bb&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-e3063c52b61c838967b9f31ea0ae0e66d90078bb" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-e3063c52b61c838967b9f31ea0ae0e66d90078bb_1">   1</a> </span><span class="LineAnchor" id="CA-e3063c52b61c838967b9f31ea0ae0e66d90078bb_1"></span><span class="anchor" id="line-1-16"></span><span class="ID">x</span> = <span class="ID">Int</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>)</span>
</pre></div></div><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><p class="line867">
</p><h4 id="A.2BiQdlcFQMZkJPXGIQ--1">複数同時作成</h4>
<span class="anchor" id="line-92"></span><p class="line874">変数名をスペースで区切って渡すか <span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-1-17"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-dfcbd45b763c5bff83cd42d46bc4b13cf1c9f4fa\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-dfcbd45b763c5bff83cd42d46bc4b13cf1c9f4fa&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-dfcbd45b763c5bff83cd42d46bc4b13cf1c9f4fa" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-dfcbd45b763c5bff83cd42d46bc4b13cf1c9f4fa_1">   1</a> </span><span class="LineAnchor" id="CA-dfcbd45b763c5bff83cd42d46bc4b13cf1c9f4fa_1"></span><span class="anchor" id="line-1-18"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Ints</span>(<span class="String">"</span><span class="String">x y</span><span class="String">"</span>)</span>
</pre></div></div><span class="anchor" id="line-96"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-1-19"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-37df7494c17f1886b6a706e00fa160a98da6b4b0\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-37df7494c17f1886b6a706e00fa160a98da6b4b0&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-37df7494c17f1886b6a706e00fa160a98da6b4b0" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-37df7494c17f1886b6a706e00fa160a98da6b4b0_1">   1</a> </span><span class="LineAnchor" id="CA-37df7494c17f1886b6a706e00fa160a98da6b4b0_1"></span><span class="anchor" id="line-1-20"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Ints</span>([<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="String">"</span><span class="String">y</span><span class="String">"</span>])</span>
</pre></div></div><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><p class="line867">
</p><h4 id="A.2BkU1SFzBnVAxmQk9cYhA--1">配列で同時作成</h4>
<span class="anchor" id="line-102"></span><p class="line874">変数を128個含むリストを生成するには次のようにする． <span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><span class="anchor" id="line-1-21"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c6904070bcafaaa6c044779a5e8e7db17f207394\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-c6904070bcafaaa6c044779a5e8e7db17f207394&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-c6904070bcafaaa6c044779a5e8e7db17f207394" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-c6904070bcafaaa6c044779a5e8e7db17f207394_1">   1</a> </span><span class="LineAnchor" id="CA-c6904070bcafaaa6c044779a5e8e7db17f207394_1"></span><span class="anchor" id="line-1-22"></span><span class="ID">xs</span> = <span class="ID">IntVector</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="Number">128</span>)</span>
</pre></div></div><span class="anchor" id="line-106"></span><p class="line862">変数名には，与えた変数名に続けて<tt class="backtick">__0</tt>, <tt class="backtick">__1</tt>, ...と番号が追加される． <span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span></p><p class="line874">あるいはPythonのリストの内包記法を用いて次のようにすればよい． <span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-1-23"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-a551be2b61b6d96ca25e838b1eacf6cfb2336344\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-a551be2b61b6d96ca25e838b1eacf6cfb2336344&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-a551be2b61b6d96ca25e838b1eacf6cfb2336344" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a551be2b61b6d96ca25e838b1eacf6cfb2336344_1">   1</a> </span><span class="LineAnchor" id="CA-a551be2b61b6d96ca25e838b1eacf6cfb2336344_1"></span><span class="anchor" id="line-1-24"></span><span class="ID">xs</span> = [<span class="ID">Int</span>(<span class="String">"</span><span class="String">x</span><span class="String">%d</span><span class="String">"</span> % <span class="ID">i</span>) <span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">128</span>)]</span>
</pre></div></div><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><p class="line867">
</p><h3 id="A.2BW59lcFkJZXAwkk9cMIs-">実数変数を作る</h3>
<span class="anchor" id="line-114"></span><p class="line867">
</p><h4 id="A.2BTgAwZE9cYhA--2">一つ作成</h4>
<span class="anchor" id="line-115"></span><p class="line867"><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-1-25"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-513a87f18245ab7dc138b99d2368fe6e74c563d7\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-513a87f18245ab7dc138b99d2368fe6e74c563d7&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-513a87f18245ab7dc138b99d2368fe6e74c563d7" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-513a87f18245ab7dc138b99d2368fe6e74c563d7_1">   1</a> </span><span class="LineAnchor" id="CA-513a87f18245ab7dc138b99d2368fe6e74c563d7_1"></span><span class="anchor" id="line-1-26"></span><span class="ID">x</span> = <span class="ID">Real</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>)</span>
</pre></div></div><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><p class="line867">
</p><h4 id="A.2BiQdlcFQMZkJPXGIQ--2">複数同時作成</h4>
<span class="anchor" id="line-120"></span><p class="line874">変数名をスペースで区切って渡すか <span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-1-27"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-2b86e3ab800739905c57cc23ebdb797f571e4a73\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-2b86e3ab800739905c57cc23ebdb797f571e4a73&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-2b86e3ab800739905c57cc23ebdb797f571e4a73" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-2b86e3ab800739905c57cc23ebdb797f571e4a73_1">   1</a> </span><span class="LineAnchor" id="CA-2b86e3ab800739905c57cc23ebdb797f571e4a73_1"></span><span class="anchor" id="line-1-28"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Reals</span>(<span class="String">"</span><span class="String">x y</span><span class="String">"</span>)</span>
</pre></div></div><span class="anchor" id="line-124"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-1-29"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-0eed7203de641a2e771a7b5feae3824841714eca\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-0eed7203de641a2e771a7b5feae3824841714eca&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-0eed7203de641a2e771a7b5feae3824841714eca" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-0eed7203de641a2e771a7b5feae3824841714eca_1">   1</a> </span><span class="LineAnchor" id="CA-0eed7203de641a2e771a7b5feae3824841714eca_1"></span><span class="anchor" id="line-1-30"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Reals</span>([<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="String">"</span><span class="String">y</span><span class="String">"</span>])</span>
</pre></div></div><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><p class="line867">
</p><h4 id="A.2BkU1SFzBnVAxmQk9cYhA--2">配列で同時作成</h4>
<span class="anchor" id="line-130"></span><p class="line874">変数を128個含むリストを生成するには次のようにする． <span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-1-31"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b6c1474943c356c239e84ebb3026011404ecd0b9\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-b6c1474943c356c239e84ebb3026011404ecd0b9&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-b6c1474943c356c239e84ebb3026011404ecd0b9" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b6c1474943c356c239e84ebb3026011404ecd0b9_1">   1</a> </span><span class="LineAnchor" id="CA-b6c1474943c356c239e84ebb3026011404ecd0b9_1"></span><span class="anchor" id="line-1-32"></span><span class="ID">xs</span> = <span class="ID">RealVector</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="Number">128</span>)</span>
</pre></div></div><span class="anchor" id="line-134"></span><p class="line862">変数名には，与えた変数名に続けて<tt class="backtick">__0</tt>, <tt class="backtick">__1</tt>, ...と番号が追加される． <span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span></p><p class="line874">あるいはPythonのリストの内包記法を用いて次のようにすればよい． <span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-1-33"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-5a91d77ad02b1c527ac34572aa742b644e177f3b\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-5a91d77ad02b1c527ac34572aa742b644e177f3b&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-5a91d77ad02b1c527ac34572aa742b644e177f3b" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5a91d77ad02b1c527ac34572aa742b644e177f3b_1">   1</a> </span><span class="LineAnchor" id="CA-5a91d77ad02b1c527ac34572aa742b644e177f3b_1"></span><span class="anchor" id="line-1-34"></span><span class="ID">xs</span> = [<span class="ID">Real</span>(<span class="String">"</span><span class="String">x</span><span class="String">%d</span><span class="String">"</span> % <span class="ID">i</span>) <span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">128</span>)]</span>
</pre></div></div><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><p class="line867">
</p><h3 id="A.2BMNMwwzDIMNkwrzDIMOtZCWVwMJJPXDCL-">ビットベクトル変数を作る</h3>
<span class="anchor" id="line-142"></span><p class="line874">ビットベクトルとは固定長のビット幅を持った整数のことである．オーバーフローすると0に戻るなど，通常のCの整数型などの様に振る舞う． <span class="anchor" id="line-143"></span>正数と負数は2の補数を通じて同一視されるが，<strong>演算子の文脈ではsignedとして扱われ，整数に変換する文脈ではunsignedとして扱われる</strong>ため注意が必要である．もちろん，unsingedで演算を行うための関数や，singedとして整数に変換するメソッドは存在する． <span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span></p><p class="line874">Z3 version 4.3.2にてRE GEXの例で試した限り，整数変数 + 上下から不等式で抑えるほうが速かった．ビット単位の操作が必要ない限りは用いないほうが良いだろう． <span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span></p><p class="line867">
</p><h4 id="A.2BTgAwZE9cYhA--3">一つ作成</h4>
<span class="anchor" id="line-148"></span><p class="line874">3ビット幅のビットベクトルを作るには次のようにする． <span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><span class="anchor" id="line-1-35"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-2770744459469d11099cf75b133f16c0a1fb4fa5\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-2770744459469d11099cf75b133f16c0a1fb4fa5&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-2770744459469d11099cf75b133f16c0a1fb4fa5" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-2770744459469d11099cf75b133f16c0a1fb4fa5_1">   1</a> </span><span class="LineAnchor" id="CA-2770744459469d11099cf75b133f16c0a1fb4fa5_1"></span><span class="anchor" id="line-1-36"></span><span class="ID">x</span> = <span class="ID">BitVec</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="Number">3</span>)</span>
</pre></div></div><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><p class="line867">
</p><h4 id="A.2BiQdlcFQMZkJPXGIQ--3">複数同時作成</h4>
<span class="anchor" id="line-154"></span><p class="line874">3ビット幅のビットベクトルを複数作るには次のようにする． <span class="anchor" id="line-155"></span>変数名をスペースで区切って渡すか <span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-1-37"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-1206462b6175d0702d23f26da8ee9a5719e17338\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-1206462b6175d0702d23f26da8ee9a5719e17338&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-1206462b6175d0702d23f26da8ee9a5719e17338" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-1206462b6175d0702d23f26da8ee9a5719e17338_1">   1</a> </span><span class="LineAnchor" id="CA-1206462b6175d0702d23f26da8ee9a5719e17338_1"></span><span class="anchor" id="line-1-38"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">BitVecs</span>(<span class="String">"</span><span class="String">x y</span><span class="String">"</span>, <span class="Number">3</span>)</span>
</pre></div></div><span class="anchor" id="line-159"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span><span class="anchor" id="line-1-39"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-9600fe1b7833f89538244a37ee46b7d3f5cd32c9\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-9600fe1b7833f89538244a37ee46b7d3f5cd32c9&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-9600fe1b7833f89538244a37ee46b7d3f5cd32c9" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-9600fe1b7833f89538244a37ee46b7d3f5cd32c9_1">   1</a> </span><span class="LineAnchor" id="CA-9600fe1b7833f89538244a37ee46b7d3f5cd32c9_1"></span><span class="anchor" id="line-1-40"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">BitVecs</span>([<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="String">"</span><span class="String">y</span><span class="String">"</span>], <span class="Number">3</span>)</span>
</pre></div></div><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><p class="line867">
</p><h4 id="A.2BkU1SFzBnVAxmQk9cYhA--3">配列で同時作成</h4>
<span class="anchor" id="line-165"></span><p class="line874">3ビット幅のビットベクトル変数を128個含むリストを生成するには <span class="anchor" id="line-166"></span>Pythonのリストの内包記法を用いて次のようにすればよい． <span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-1-41"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-91b072ac9722cc7c0ccc918270c22340a44630d0\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-91b072ac9722cc7c0ccc918270c22340a44630d0&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-91b072ac9722cc7c0ccc918270c22340a44630d0" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-91b072ac9722cc7c0ccc918270c22340a44630d0_1">   1</a> </span><span class="LineAnchor" id="CA-91b072ac9722cc7c0ccc918270c22340a44630d0_1"></span><span class="anchor" id="line-1-42"></span><span class="ID">xs</span> = [<span class="ID">BitVec</span>(<span class="String">"</span><span class="String">x</span><span class="String">%d</span><span class="String">"</span> % <span class="ID">i</span>, <span class="Number">3</span>) <span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">128</span>)]</span>
</pre></div></div><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><p class="line862">他の変数のように<tt class="backtick">*Vector</tt>系のメソッドは提供されていない． <span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span></p><p class="line867">
</p><h3 id="A.2BUhdjGVeLWQllcDCST1wwiw-">列挙型変数を作る</h3>
<span class="anchor" id="line-174"></span><p class="line874">Z3は列挙型を扱うことが出来る．しかし，Z3 version 4.3.2にてRE GEXの例で試した限り，整数変数 + 上下から不等式で抑えるほうが速かった． <span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span></p><p class="line874">列挙型は次のように定義する． <span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-1-43"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-8e19b1a8fb5deb83ee284a0d69eb83b63314e0ab\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-8e19b1a8fb5deb83ee284a0d69eb83b63314e0ab&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-8e19b1a8fb5deb83ee284a0d69eb83b63314e0ab" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-8e19b1a8fb5deb83ee284a0d69eb83b63314e0ab_1">   1</a> </span><span class="LineAnchor" id="CA-8e19b1a8fb5deb83ee284a0d69eb83b63314e0ab_1"></span><span class="anchor" id="line-1-44"></span><span class="ID">RPS</span>, (<span class="ID">rock</span>, <span class="ID">paper</span>, <span class="ID">scissors</span>) = <span class="ID">EnumSort</span>(<span class="String">"</span><span class="String">RPS</span><span class="String">"</span>, [<span class="String">"</span><span class="String">rock</span><span class="String">"</span>, <span class="String">"</span><span class="String">paper</span><span class="String">"</span>, <span class="String">"</span><span class="String">scissors</span><span class="String">"</span>])</span>
</pre></div></div><span class="anchor" id="line-180"></span><p class="line867"><tt class="backtick">RPS</tt>は列挙型を表すオブジェクト，<tt class="backtick">rock</tt>, <tt class="backtick">paper</tt>, <tt class="backtick">scissors</tt>はそれぞれの値を表すオブジェクトとなる． <span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span></p><p class="line867">
</p><h4 id="A.2BTgAwZE9cYhA--4">一つ作成</h4>
<span class="anchor" id="line-184"></span><p class="line862">列挙型<tt class="backtick">RPS</tt>の変数を作るには次のようにする． <span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-1-45"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-10cfdea058dd2d80998571087989ac5a56a847bc\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-10cfdea058dd2d80998571087989ac5a56a847bc&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-10cfdea058dd2d80998571087989ac5a56a847bc" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-10cfdea058dd2d80998571087989ac5a56a847bc_1">   1</a> </span><span class="LineAnchor" id="CA-10cfdea058dd2d80998571087989ac5a56a847bc_1"></span><span class="anchor" id="line-1-46"></span><span class="ID">x</span> = <span class="ID">Const</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="ID">RPS</span>)</span>
</pre></div></div><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><p class="line874">定数という名前が付いているが，これはこの記事で呼ぶところの変数のことである． <span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span></p><p class="line867">
</p><h4 id="A.2BiQdlcFQMZkJPXGIQ--4">複数同時作成</h4>
<span class="anchor" id="line-192"></span><p class="line862">列挙型<tt class="backtick">RPS</tt>の変数を複数作るには次のようにする． <span class="anchor" id="line-193"></span>変数名をスペースで区切って渡すか <span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-1-47"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-1a93b3fa0585875b2641bfba9dc84fbdee888393\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-1a93b3fa0585875b2641bfba9dc84fbdee888393&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-1a93b3fa0585875b2641bfba9dc84fbdee888393" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-1a93b3fa0585875b2641bfba9dc84fbdee888393_1">   1</a> </span><span class="LineAnchor" id="CA-1a93b3fa0585875b2641bfba9dc84fbdee888393_1"></span><span class="anchor" id="line-1-48"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Consts</span>(<span class="String">"</span><span class="String">x y</span><span class="String">"</span>, <span class="ID">RPS</span>)</span>
</pre></div></div><span class="anchor" id="line-197"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-1-49"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-d8b9719919a4239adbae8e2cc10eb7c25c2e359a\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-d8b9719919a4239adbae8e2cc10eb7c25c2e359a&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-d8b9719919a4239adbae8e2cc10eb7c25c2e359a" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d8b9719919a4239adbae8e2cc10eb7c25c2e359a_1">   1</a> </span><span class="LineAnchor" id="CA-d8b9719919a4239adbae8e2cc10eb7c25c2e359a_1"></span><span class="anchor" id="line-1-50"></span><span class="ID">x</span>, <span class="ID">y</span> = <span class="ID">Consts</span>([<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="String">"</span><span class="String">y</span><span class="String">"</span>], <span class="ID">RPS</span>)</span>
</pre></div></div><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><p class="line867">
</p><h2 id="A.2BUjZ9BDBuii1bmg-">制約の設定</h2>
<span class="anchor" id="line-203"></span><p class="line867">
</p><h3 id="A.2BUjZ9BDBuj.2F1SoA-">制約の追加</h3>
<span class="anchor" id="line-204"></span><p class="line874">次節以降で紹介する論理式やブール変数により表される命題<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-10"><span style="display: inline-block; position: relative; width: 4.369em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 3.074em, -0.424em);"><span class="mrow" id="MathJax-Span-11"><span class="msubsup" id="MathJax-Span-12"><span style="display: inline-block; position: relative; width: 1.166em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Math; font-style: italic;">P</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.735em;"><span class="mn" id="MathJax-Span-14" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-15" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-16" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.166em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math; font-style: italic;">P</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.735em;"><span class="mn" id="MathJax-Span-18" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-20" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.079em; vertical-align: -0.239em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">P_1, P_2, \dots</script>があるとき， <span class="anchor" id="line-205"></span>それらが真になるという制約を加えるには次のようにする． <span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-1-51"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-e20ece66bff39381ddd052167e5fcd0a3f371d37\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-e20ece66bff39381ddd052167e5fcd0a3f371d37&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-e20ece66bff39381ddd052167e5fcd0a3f371d37" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-e20ece66bff39381ddd052167e5fcd0a3f371d37_1">   1</a> </span><span class="LineAnchor" id="CA-e20ece66bff39381ddd052167e5fcd0a3f371d37_1"></span><span class="anchor" id="line-1-52"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">P1</span>, <span class="ID">P2</span>, ...)</span>
</pre></div></div><span class="anchor" id="line-209"></span><p class="line874">追加した制約を全て満たすかどうか判定される．つまり，全てANDで接続した論理式が評価される． <span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span></p><p class="line862">他に<tt class="backtick">append</tt>, <tt class="backtick">assert_exprs</tt>, <tt class="backtick">insert</tt>というメソッドもあるが<strong>単なる別名</strong>である． <span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span></p><p class="line867">
</p><h3 id="A.2BitZ0Bg-AND">論理AND</h3>
<span class="anchor" id="line-214"></span><p class="line874"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-21"><span style="display: inline-block; position: relative; width: 5.639em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 3.03em, -0.424em);"><span class="mrow" id="MathJax-Span-22"><span class="msubsup" id="MathJax-Span-23"><span style="display: inline-block; position: relative; width: 1.166em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math; font-style: italic;">P</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.735em;"><span class="mn" id="MathJax-Span-25" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-26" style="font-family: MathJax_Main; padding-left: 0.222em;">∧</span><span class="msubsup" id="MathJax-Span-27" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.166em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mi" id="MathJax-Span-28" style="font-family: MathJax_Math; font-style: italic;">P</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.735em;"><span class="mn" id="MathJax-Span-29" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-30" style="font-family: MathJax_Main; padding-left: 0.222em;">∧</span><span class="mo" id="MathJax-Span-31" style="font-family: MathJax_Main; padding-left: 0.222em;">…</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.026em; vertical-align: -0.185em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">P_1 \wedge P_2 \wedge \dots</script> を表すには次のようにする． <span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-1-53"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-92b5df287dbde3c5897c07b4a780ce2406df9be9\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-92b5df287dbde3c5897c07b4a780ce2406df9be9&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-92b5df287dbde3c5897c07b4a780ce2406df9be9" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-92b5df287dbde3c5897c07b4a780ce2406df9be9_1">   1</a> </span><span class="LineAnchor" id="CA-92b5df287dbde3c5897c07b4a780ce2406df9be9_1"></span><span class="anchor" id="line-1-54"></span><span class="ID">And</span>(<span class="ID">P1</span>, <span class="ID">P2</span>, ...)</span>
</pre></div></div><span class="anchor" id="line-218"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-1-55"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-f92f062c641611c6172726672e680aaf89db0492\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-f92f062c641611c6172726672e680aaf89db0492&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-f92f062c641611c6172726672e680aaf89db0492" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-f92f062c641611c6172726672e680aaf89db0492_1">   1</a> </span><span class="LineAnchor" id="CA-f92f062c641611c6172726672e680aaf89db0492_1"></span><span class="anchor" id="line-1-56"></span><span class="ID">And</span>([<span class="ID">P1</span>, <span class="ID">P2</span>, ...])</span>
</pre></div></div><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><p class="line874">注意: Pythonのandでは求める動作をしない． <span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span></p><p class="line867">
</p><h3 id="A.2BitZ0Bg-OR">論理OR</h3>
<span class="anchor" id="line-226"></span><p class="line874"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-32"><span style="display: inline-block; position: relative; width: 5.639em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 3.03em, -0.424em);"><span class="mrow" id="MathJax-Span-33"><span class="msubsup" id="MathJax-Span-34"><span style="display: inline-block; position: relative; width: 1.166em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math; font-style: italic;">P</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.735em;"><span class="mn" id="MathJax-Span-36" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main; padding-left: 0.222em;">∨</span><span class="msubsup" id="MathJax-Span-38" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.166em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mi" id="MathJax-Span-39" style="font-family: MathJax_Math; font-style: italic;">P</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.735em;"><span class="mn" id="MathJax-Span-40" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-41" style="font-family: MathJax_Main; padding-left: 0.222em;">∨</span><span class="mo" id="MathJax-Span-42" style="font-family: MathJax_Main; padding-left: 0.222em;">…</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.026em; vertical-align: -0.185em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">P_1 \vee P_2 \vee \dots</script> を表すには次のようにする． <span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-1-57"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-eca7990cfb2ac7846ef2715b247ddb1fd38987cf\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-eca7990cfb2ac7846ef2715b247ddb1fd38987cf&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-eca7990cfb2ac7846ef2715b247ddb1fd38987cf" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-eca7990cfb2ac7846ef2715b247ddb1fd38987cf_1">   1</a> </span><span class="LineAnchor" id="CA-eca7990cfb2ac7846ef2715b247ddb1fd38987cf_1"></span><span class="anchor" id="line-1-58"></span><span class="ID">Or</span>(<span class="ID">P1</span>, <span class="ID">P2</span>, ...)</span>
</pre></div></div><span class="anchor" id="line-230"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-1-59"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-26954e4c1d4ab880e49ac360a8a0af4a48c6f06c\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-26954e4c1d4ab880e49ac360a8a0af4a48c6f06c&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-26954e4c1d4ab880e49ac360a8a0af4a48c6f06c" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-26954e4c1d4ab880e49ac360a8a0af4a48c6f06c_1">   1</a> </span><span class="LineAnchor" id="CA-26954e4c1d4ab880e49ac360a8a0af4a48c6f06c_1"></span><span class="anchor" id="line-1-60"></span><span class="ID">Or</span>([<span class="ID">P1</span>, <span class="ID">P2</span>, ...])</span>
</pre></div></div><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><p class="line874">注意: Pythonのorでは求める動作をしない． <span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span></p><p class="line867">
</p><h3 id="A.2BitZ0Bg-XOR">論理XOR</h3>
<span class="anchor" id="line-238"></span><p class="line874"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-43"><span style="display: inline-block; position: relative; width: 2.591em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.871em, 1000em, 3.075em, -0.424em);"><span class="mrow" id="MathJax-Span-44"><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math; font-style: italic;">P</span><span class="mo" id="MathJax-Span-46" style="font-family: MathJax_Main; padding-left: 0.222em;">⊕</span><span class="mi" id="MathJax-Span-47" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">Q</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.106em; vertical-align: -0.24em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">P \oplus Q</script> を表すには次のようにする． <span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-1-61"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-330af4f82cb7b55054889dea78a00f3b8f52d57e\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-330af4f82cb7b55054889dea78a00f3b8f52d57e&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-330af4f82cb7b55054889dea78a00f3b8f52d57e" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-330af4f82cb7b55054889dea78a00f3b8f52d57e_1">   1</a> </span><span class="LineAnchor" id="CA-330af4f82cb7b55054889dea78a00f3b8f52d57e_1"></span><span class="anchor" id="line-1-62"></span><span class="ID">Xor</span>(<span class="ID">P</span>, <span class="ID">Q</span>)</span>
</pre></div></div><span class="anchor" id="line-242"></span><p class="line874">引数の数はちょうど2個のみで，配列も受け付けないので注意する． <span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span></p><p class="line862">注意: Pythonの<tt class="backtick">^</tt>演算子では求める動作をしない． <span class="comment" style="display:none"><tt class="backtick">^</tt>演算子はビットXORの項を参照せよ．</span> <span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span></p><p class="line867">
</p><h3 id="A.2BitZ0Bg-NOT">論理NOT</h3>
<span class="anchor" id="line-247"></span><p class="line874"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-48"><span style="display: inline-block; position: relative; width: 0.914em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.552em, 1000em, 2.88em, -0.457em);"><span class="mrow" id="MathJax-Span-49"><span class="munderover" id="MathJax-Span-50"><span style="display: inline-block; position: relative; width: 0.891em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0.115em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math; font-style: italic;">P</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -3.38em; left: 0em; clip: rect(2.305em, 1000em, 2.65em, -0.457em);"><span class="mo" id="MathJax-Span-52" style=""><span style="display: inline-block; position: relative; width: 0.891em; height: 0px;"><span style="position: absolute; font-family: MathJax_Main; top: -2.727em; left: -0.083em;">−<span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; font-family: MathJax_Main; top: -2.727em; left: 0.197em;">−<span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.259em; vertical-align: 0em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">\overline{P}</script> を表すには次のようにする． <span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-1-63"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-97d5e007b201ef7dd167f7fe701f079236b9a8c8\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-97d5e007b201ef7dd167f7fe701f079236b9a8c8&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-97d5e007b201ef7dd167f7fe701f079236b9a8c8" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-97d5e007b201ef7dd167f7fe701f079236b9a8c8_1">   1</a> </span><span class="LineAnchor" id="CA-97d5e007b201ef7dd167f7fe701f079236b9a8c8_1"></span><span class="anchor" id="line-1-64"></span><span class="ID">Not</span>(<span class="ID">P</span>)</span>
</pre></div></div><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><p class="line874">注意: Pythonのnotでは求める動作をしない． <span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span></p><p class="line867">
</p><h3 id="Implies_.28.3D.3E.2C_.2BMGowiTBw.29">Implies (=&gt;, ならば)</h3>
<span class="anchor" id="line-255"></span><p class="line874"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-53"><span style="display: inline-block; position: relative; width: 2.947em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.871em, 1000em, 3.075em, -0.424em);"><span class="mrow" id="MathJax-Span-54"><span class="mi" id="MathJax-Span-55" style="font-family: MathJax_Math; font-style: italic;">P</span><span class="mo" id="MathJax-Span-56" style="font-family: MathJax_Main; padding-left: 0.278em;">⇒</span><span class="mi" id="MathJax-Span-57" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">Q</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.106em; vertical-align: -0.24em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">P \Rightarrow Q</script> を表すには次のようにする． <span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-1-65"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-6859b8bd5e5fb0d276c3136b06092fbdf3f4895b\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-6859b8bd5e5fb0d276c3136b06092fbdf3f4895b&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-6859b8bd5e5fb0d276c3136b06092fbdf3f4895b" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-6859b8bd5e5fb0d276c3136b06092fbdf3f4895b_1">   1</a> </span><span class="LineAnchor" id="CA-6859b8bd5e5fb0d276c3136b06092fbdf3f4895b_1"></span><span class="anchor" id="line-1-66"></span><span class="ID">Implies</span>(<span class="ID">P</span>, <span class="ID">Q</span>)</span>
</pre></div></div><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><p class="line867">
</p><h3 id="A.2BVAxQJA.28Equals.29">同値(Equals)</h3>
<span class="anchor" id="line-261"></span><p class="line874"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-58"><span style="display: inline-block; position: relative; width: 2.947em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.871em, 1000em, 3.075em, -0.424em);"><span class="mrow" id="MathJax-Span-59"><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math; font-style: italic;">P</span><span class="mo" id="MathJax-Span-61" style="font-family: MathJax_Main; padding-left: 0.278em;">⇔</span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">Q</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.106em; vertical-align: -0.24em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7">P \Leftrightarrow Q</script> を表すには次のようにする． <span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><span class="anchor" id="line-1-67"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-2cf30458a8beb0d9c52044e3d4b9eccccaa53fdd\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-2cf30458a8beb0d9c52044e3d4b9eccccaa53fdd&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-2cf30458a8beb0d9c52044e3d4b9eccccaa53fdd" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-2cf30458a8beb0d9c52044e3d4b9eccccaa53fdd_1">   1</a> </span><span class="LineAnchor" id="CA-2cf30458a8beb0d9c52044e3d4b9eccccaa53fdd_1"></span><span class="anchor" id="line-1-68"></span><span class="ID">P</span> == <span class="ID">Q</span></span>
</pre></div></div><span class="anchor" id="line-265"></span><p class="line874">または数値に対し<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-63"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-64"><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-66" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-67" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.797em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">x = y</script>も同様である． <span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><span class="anchor" id="line-1-69"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ab0635a77cd5c47690e1cc1e165868c6551232fb\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-ab0635a77cd5c47690e1cc1e165868c6551232fb&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-ab0635a77cd5c47690e1cc1e165868c6551232fb" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-ab0635a77cd5c47690e1cc1e165868c6551232fb_1">   1</a> </span><span class="LineAnchor" id="CA-ab0635a77cd5c47690e1cc1e165868c6551232fb_1"></span><span class="anchor" id="line-1-70"></span><span class="ID">x</span> == <span class="ID">y</span></span>
</pre></div></div><span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span><p class="line867">
</p><h3 id="A.2BTg17SV8P-">不等式</h3>
<span class="anchor" id="line-271"></span><p class="line874">普通のPythonの不等式と同じ． <span class="anchor" id="line-272"></span>ただし<strong>不等式のチェーンはできない</strong>． <span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span></p><p class="line874">駄目な例(不等式のチェーン) <span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span></p><pre><span class="anchor" id="line-1"></span>&gt;&gt;&gt; 0 &lt; x &lt; 1
<span class="anchor" id="line-2"></span>x &lt; 1</pre><span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><p class="line867">
</p><h3 id="A.2Be5eIU28Ue5c-">算術演算</h3>
<span class="anchor" id="line-281"></span><p class="line874">普通のPythonの算術演算と同じ． <span class="anchor" id="line-282"></span></p><ul><li><p class="line862">加算 <tt class="backtick">+</tt> <span class="anchor" id="line-283"></span></p></li><li><p class="line862">減算 <tt class="backtick">-</tt> <span class="anchor" id="line-284"></span></p></li><li><p class="line862">乗算 <tt class="backtick">*</tt> <span class="anchor" id="line-285"></span></p></li><li><p class="line862">除算 <tt class="backtick">/</tt> <span class="anchor" id="line-286"></span></p></li><li><p class="line862">冪乗 <tt class="backtick">**</tt> <span class="anchor" id="line-287"></span></p></li><li><p class="line862">剰余 <tt class="backtick">%</tt> <span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span></p></li></ul><p class="line874">なお整数型に対して除算を行うと，小数以下は切り下げられる． <span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span></p><pre><span class="anchor" id="line-1-1"></span>&gt;&gt;&gt; x = Int("x")
<span class="anchor" id="line-2-1"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3"></span>&gt;&gt;&gt; s.add(x / 10 == -1)
<span class="anchor" id="line-4"></span>&gt;&gt;&gt; s.add(x % 10 == 1)
<span class="anchor" id="line-5"></span>&gt;&gt;&gt; s.check()
<span class="anchor" id="line-6"></span>sat
<span class="anchor" id="line-7"></span>&gt;&gt;&gt; s.model()
<span class="anchor" id="line-8"></span>[x = -9]</pre><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><p class="line867">
</p><h3 id="A.2BUWgwZnVwMGowi1AkMJJjATBk.28Distinct.29">全て異なる値を持つ(Distinct)</h3>
<span class="anchor" id="line-302"></span><p class="line874">式 <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-68"><span style="display: inline-block; position: relative; width: 4.166em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 3.074em, -0.422em);"><span class="mrow" id="MathJax-Span-69"><span class="msubsup" id="MathJax-Span-70"><span style="display: inline-block; position: relative; width: 1.064em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mi" id="MathJax-Span-71" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.634em;"><span class="mn" id="MathJax-Span-72" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-73" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-74" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.064em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mi" id="MathJax-Span-75" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.634em;"><span class="mn" id="MathJax-Span-76" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-77" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-78" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.784em; vertical-align: -0.239em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-9">x_1, x_2, \dots</script> が異なる値を持つことを表すには次のようにする． <span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-1-71"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-5139872b03e8b4011d50b480716620b96d105179\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-5139872b03e8b4011d50b480716620b96d105179&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-5139872b03e8b4011d50b480716620b96d105179" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5139872b03e8b4011d50b480716620b96d105179_1">   1</a> </span><span class="LineAnchor" id="CA-5139872b03e8b4011d50b480716620b96d105179_1"></span><span class="anchor" id="line-1-72"></span><span class="ID">Distinct</span>(<span class="ID">x1</span>, <span class="ID">x2</span>, ...)</span>
</pre></div></div><span class="anchor" id="line-306"></span><p class="line874">あるいは次のようにする． <span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><span class="anchor" id="line-1-73"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-8455db19545a309343cf4265a0ca934a6634a17b\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-8455db19545a309343cf4265a0ca934a6634a17b&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-8455db19545a309343cf4265a0ca934a6634a17b" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-8455db19545a309343cf4265a0ca934a6634a17b_1">   1</a> </span><span class="LineAnchor" id="CA-8455db19545a309343cf4265a0ca934a6634a17b_1"></span><span class="anchor" id="line-1-74"></span><span class="ID">Distinct</span>([<span class="ID">x1</span>, <span class="ID">x2</span>, ...])</span>
</pre></div></div><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><p class="line867">
</p><h3 id="A.2BZ2FO9lIGXJA.28If.29">条件分岐(If)</h3>
<span class="anchor" id="line-312"></span><p class="line874">if <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-79"><span style="display: inline-block; position: relative; width: 0.66em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.892em, 1000em, 2.88em, -0.424em);"><span class="mrow" id="MathJax-Span-80"><span class="mi" id="MathJax-Span-81" style="font-family: MathJax_Math; font-style: italic;">P</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.84em; vertical-align: 0em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10">P</script> then <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-82"><span style="display: inline-block; position: relative; width: 0.559em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mrow" id="MathJax-Span-83"><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.559em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">x</script> else <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-85"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mrow" id="MathJax-Span-86"><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math; font-style: italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.796em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">y</script> を表すには次のようにする． <span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span><span class="anchor" id="line-1-75"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-c8c0dc48ee380b29423543ed4c7e23659cf29919\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-c8c0dc48ee380b29423543ed4c7e23659cf29919&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-c8c0dc48ee380b29423543ed4c7e23659cf29919" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-c8c0dc48ee380b29423543ed4c7e23659cf29919_1">   1</a> </span><span class="LineAnchor" id="CA-c8c0dc48ee380b29423543ed4c7e23659cf29919_1"></span><span class="anchor" id="line-1-76"></span><span class="ID">If</span>(<span class="ID">P</span>, <span class="ID">x</span>, <span class="ID">y</span>)</span>
</pre></div></div><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><p class="line867">
</p><h3 id="A.2BV4swblkJY9s.28Int_.3C-.3E_Real.29">型の変換(Int &lt;-&gt; Real)</h3>
<span class="anchor" id="line-318"></span><p class="line867"><tt class="backtick">Int</tt>型と<tt class="backtick">Real</tt>型の間は<tt class="backtick">ToInt</tt>と<tt class="backtick">ToReal</tt>で変換できる． <span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span></p><p class="line867"><tt class="backtick">ToInt</tt>では小数点以下は切り下げられる． <span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span></p><pre><span class="anchor" id="line-1-2"></span>&gt;&gt;&gt; x = Real("x")
<span class="anchor" id="line-2-2"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3-1"></span>&gt;&gt;&gt; s.add(-1 &lt; x, x &lt; 0)
<span class="anchor" id="line-4-1"></span>&gt;&gt;&gt; s.add(ToInt(x) == -1)
<span class="anchor" id="line-5-1"></span>&gt;&gt;&gt; s.check()
<span class="anchor" id="line-6-1"></span>sat
<span class="anchor" id="line-7-1"></span>&gt;&gt;&gt; s.model()
<span class="anchor" id="line-8-1"></span>[x = -1/2]</pre><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><p class="line867">
</p><h4 id="ToInt.2BMGg-ToReal.2BMG.2BXXlv.2BefBgJw-">ToIntとToRealは非対称性</h4>
<span class="anchor" id="line-333"></span><p class="line874">Z3には代入は存在せず，ただ関係を記述した制約式があるだけである． <span class="anchor" id="line-334"></span>もしも<tt class="backtick">ToInt</tt>と<tt class="backtick">ToReal</tt>が対称な操作であるなら， <span class="anchor" id="line-335"></span>整数変数<tt class="backtick">x</tt>と実数変数<tt class="backtick">y</tt>に対して<tt class="backtick">x&nbsp;==&nbsp;ToInt(y)</tt>と<tt class="backtick">ToReal(x)&nbsp;==&nbsp;y</tt>は同じ意味になるはずである． <span class="anchor" id="line-336"></span>しかし，前述の通り，<tt class="backtick">ToInt</tt>は小数点以下を切り下げるため，実際には非対称になっている． <span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span></p><p class="line867"><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span></p><pre><span class="anchor" id="line-1-3"></span>&gt;&gt;&gt; x = Int("x")
<span class="anchor" id="line-2-3"></span>&gt;&gt;&gt; y = Real("x")
<span class="anchor" id="line-3-2"></span>&gt;&gt;&gt; solve(y == 1.5, x == ToInt(y))
<span class="anchor" id="line-4-2"></span>[x = 1, x = 3/2]
<span class="anchor" id="line-5-2"></span>&gt;&gt;&gt; solve(y == 1.5, ToReal(x) == y)
<span class="anchor" id="line-6-2"></span>no solution</pre><span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><p class="line862">次の図のように，<tt class="backtick">x&nbsp;==&nbsp;ToInt(y)</tt>では任意の実数に対して対応する整数が存在するが， <span class="anchor" id="line-348"></span><tt class="backtick">ToReal(x)&nbsp;==&nbsp;y</tt>では正確に整数値となる実数のみ，整数に対応する． <span class="anchor" id="line-349"></span><span class="anchor" id="line-350"></span></p><p class="line867"><img alt="ToInt-ToReal.png" class="attachment" src="./z3py_files/ToInt-ToReal.png" title="ToInt-ToReal.png"> <span class="anchor" id="line-351"></span><span class="anchor" id="line-352"></span></p><p class="line867">
</p><h2 id="A.2BUjZ9BDBuii1bmg.28.2BMNMwwzDIMNkwrzDIMOs.29">制約の設定(ビットベクトル)</h2>
<span class="anchor" id="line-353"></span><p class="line874">ビットベクトルに対しては，専用の関数や，符号の有無で特筆すべき点が多いため，特に節を分けて紹介する． <span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span></p><p class="line867">
</p><h3 id="A.2Be5eIU28Ue5c.28.2BeyZT907YME0.29">算術演算(符号付き)</h3>
<span class="anchor" id="line-356"></span><p class="line874">符号付きの算術演算は通常使用する演算と変わらない． <span class="anchor" id="line-357"></span>ただしビットベクトルに対しては冪乗が使用できない． <span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span></p><ul><li><p class="line862">加算 <tt class="backtick">+</tt> <span class="anchor" id="line-360"></span></p></li><li><p class="line862">減算 <tt class="backtick">-</tt> <span class="anchor" id="line-361"></span></p></li><li><p class="line862">乗算 <tt class="backtick">*</tt> <span class="anchor" id="line-362"></span></p></li><li><p class="line862">除算 <tt class="backtick">/</tt> <span class="anchor" id="line-363"></span></p></li><li><p class="line862">剰余 <tt class="backtick">%</tt> <span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span></p></li></ul><p class="line867">
</p><h3 id="A.2Be5eIU28Ue5c.28.2BeyZT93EhMFc.29">算術演算(符号無し)</h3>
<span class="anchor" id="line-366"></span><p class="line874">次の演算については符号無しと符号付きで演算が共通であるため，通常使用する演算子を用いる． <span class="anchor" id="line-367"></span>ただしビットベクトルに対しては冪乗が使用できない． <span class="anchor" id="line-368"></span></p><ul><li><p class="line862">加算 <tt class="backtick">+</tt> <span class="anchor" id="line-369"></span></p></li><li><p class="line862">減算 <tt class="backtick">-</tt> <span class="anchor" id="line-370"></span></p></li><li><p class="line862">乗算 <tt class="backtick">*</tt> <span class="anchor" id="line-371"></span></p><ul><li>注) 乗算について，ここでは入力と出力のビット幅が等しいため共通の演算を用いることが出来る． <span class="anchor" id="line-372"></span><span class="anchor" id="line-373"></span></li></ul></li></ul><p class="line874">以下の演算については通常の演算子とは異なる． <span class="anchor" id="line-374"></span></p><ul><li><p class="line862">除算 <tt class="backtick">UDiv(a,&nbsp;b)</tt> <span class="anchor" id="line-375"></span></p></li><li><p class="line862">剰余 <tt class="backtick">URem(a,&nbsp;b)</tt> <span class="anchor" id="line-376"></span><span class="anchor" id="line-377"></span></p></li></ul><p class="line867">
</p><h3 id="A.2BTg17SVP3.28.2BeyZT907YME0.29">不等号(符号付き)</h3>
<span class="anchor" id="line-378"></span><p class="line874">符号付きの不等号は通常使用する演算と変わらない． <span class="anchor" id="line-379"></span></p><ul><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-88"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.939em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-89"><span class="mi" id="MathJax-Span-90" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-91" style="font-family: MathJax_Main; padding-left: 0.278em;">≥</span><span class="mi" id="MathJax-Span-92" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.035em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-13">x\ge y</script>: <tt class="backtick">x&nbsp;&gt;=&nbsp;y</tt> <span class="anchor" id="line-380"></span></p></li><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-93"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.035em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-94"><span class="mi" id="MathJax-Span-95" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-96" style="font-family: MathJax_Main; padding-left: 0.278em;">&gt;</span><span class="mi" id="MathJax-Span-97" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.917em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">x > y</script>: <tt class="backtick">x&nbsp;&gt;&nbsp;y</tt> <span class="anchor" id="line-381"></span></p></li><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-98"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.939em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-99"><span class="mi" id="MathJax-Span-100" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-101" style="font-family: MathJax_Main; padding-left: 0.278em;">≤</span><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.035em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-15">x \le y</script>: <tt class="backtick">x&nbsp;&lt;=&nbsp;y</tt> <span class="anchor" id="line-382"></span></p></li><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-103"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.035em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-104"><span class="mi" id="MathJax-Span-105" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-106" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-107" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.917em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">x < y</script>: <tt class="backtick">x&nbsp;&lt;&nbsp;y</tt> <span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span></p></li></ul><p class="line867">
</p><h3 id="A.2BTg17SVP3.28.2BeyZT93EhMFc.29">不等号(符号無し)</h3>
<span class="anchor" id="line-385"></span><p class="line874">符号無しの不等号については通常の演算子とは異なる． <span class="anchor" id="line-386"></span></p><ul><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-108"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.939em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-109"><span class="mi" id="MathJax-Span-110" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-111" style="font-family: MathJax_Main; padding-left: 0.278em;">≥</span><span class="mi" id="MathJax-Span-112" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.035em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-17">x\ge y</script>: <tt class="backtick">UGE(x,&nbsp;y)</tt> <span class="anchor" id="line-387"></span></p></li><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-113"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.035em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-114"><span class="mi" id="MathJax-Span-115" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-116" style="font-family: MathJax_Main; padding-left: 0.278em;">&gt;</span><span class="mi" id="MathJax-Span-117" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.917em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-18">x > y</script>: <tt class="backtick">UGT(x,&nbsp;y)</tt> <span class="anchor" id="line-388"></span></p></li><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-118"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.939em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-119"><span class="mi" id="MathJax-Span-120" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-121" style="font-family: MathJax_Main; padding-left: 0.278em;">≤</span><span class="mi" id="MathJax-Span-122" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.035em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-19">x \le y</script>: <tt class="backtick">ULE(x,&nbsp;y)</tt> <span class="anchor" id="line-389"></span></p></li><li><p class="line862"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-123"><span style="display: inline-block; position: relative; width: 2.337em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.035em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-124"><span class="mi" id="MathJax-Span-125" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-126" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-127" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.917em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-20">x < y</script>: <tt class="backtick">ULT(x,&nbsp;y)</tt> <span class="anchor" id="line-390"></span><span class="anchor" id="line-391"></span></p></li></ul><p class="line867">
</p><h3 id="A.2BMNMwwzDI-AND.2C_.2BMNMwwzDI-OR.2C_.2BMNMwwzDI-XOR.2C_.2BMNMwwzDI-NOT">ビットAND, ビットOR, ビットXOR, ビットNOT</h3>
<span class="anchor" id="line-392"></span><p class="line874">通常のPythonと同様のビット演算子を用いる． <span class="anchor" id="line-393"></span></p><ul><li><p class="line862">ビットAND: <tt class="backtick">&amp;</tt> <span class="anchor" id="line-394"></span></p></li><li><p class="line862">ビットOR: <tt class="backtick">|</tt> <span class="anchor" id="line-395"></span></p></li><li><p class="line862">ビットXOR: <tt class="backtick">^</tt> <span class="anchor" id="line-396"></span></p></li><li><p class="line862">ビットNOT: <tt class="backtick">~</tt> <span class="anchor" id="line-397"></span><span class="anchor" id="line-398"></span><span class="anchor" id="line-399"></span></p></li></ul><p class="line867">
</p><h3 id="A.2BMNMwwzDIMLcw1TDI-">ビットシフト</h3>
<span class="anchor" id="line-400"></span><ul><li><p class="line862">左シフト <tt class="backtick">x&nbsp;&lt;&lt;&nbsp;y</tt>: <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-128"><span style="display: inline-block; position: relative; width: 0.559em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mrow" id="MathJax-Span-129"><span class="mi" id="MathJax-Span-130" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.559em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-21">x</script>を<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-131"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mrow" id="MathJax-Span-132"><span class="mi" id="MathJax-Span-133" style="font-family: MathJax_Math; font-style: italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.796em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-22">y</script>ビット左シフトする． <span class="anchor" id="line-401"></span></p></li><li><p class="line862">右符号付き <tt class="backtick">x&nbsp;&gt;&gt;&nbsp;y</tt>: <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-134"><span style="display: inline-block; position: relative; width: 0.559em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mrow" id="MathJax-Span-135"><span class="mi" id="MathJax-Span-136" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.559em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-23">x</script>を<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-137"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mrow" id="MathJax-Span-138"><span class="mi" id="MathJax-Span-139" style="font-family: MathJax_Math; font-style: italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.796em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-24">y</script>ビット算術右シフトする． <span class="anchor" id="line-402"></span></p></li><li><p class="line862">右符号無し <tt class="backtick">LShR(x,&nbsp;y)</tt>: <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-140"><span style="display: inline-block; position: relative; width: 0.559em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mrow" id="MathJax-Span-141"><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.559em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-25">x</script>を<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-143"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mrow" id="MathJax-Span-144"><span class="mi" id="MathJax-Span-145" style="font-family: MathJax_Math; font-style: italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.796em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-26">y</script>ビット論理右シフトする． <span class="anchor" id="line-403"></span><span class="anchor" id="line-404"></span></p></li></ul><p class="line874">ビットシフトには二つ注意事項がある． <span class="anchor" id="line-405"></span></p><ul><li>ビットシフト対象とシフト量のビット幅は同じでなければならない． <span class="anchor" id="line-406"></span></li><li>シフト量は常にunsigned扱いされる． <span class="anchor" id="line-407"></span></li></ul><p class="line874">シフト量がunsinged扱いされることについては，シフト量が負になることや， <span class="anchor" id="line-408"></span>負数と解釈できるような量になることは無いだろうから，通常は気にする必要はないだろう． <span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span><span class="anchor" id="line-411"></span></p><p class="line867">
</p><h3 id="A.2BVt6O4jC3MNUwyA-">回転シフト</h3>
<span class="anchor" id="line-412"></span><ul><li><p class="line862">左 <tt class="backtick">RotateLeft(x,&nbsp;y)</tt>: <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-146"><span style="display: inline-block; position: relative; width: 0.559em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mrow" id="MathJax-Span-147"><span class="mi" id="MathJax-Span-148" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.559em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-27">x</script>を<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-149"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mrow" id="MathJax-Span-150"><span class="mi" id="MathJax-Span-151" style="font-family: MathJax_Math; font-style: italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.796em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-28">y</script>ビット左回転シフトする． <span class="anchor" id="line-413"></span></p></li><li><p class="line862">右 <tt class="backtick">RotateRight(x,&nbsp;y)</tt>: <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-152"><span style="display: inline-block; position: relative; width: 0.559em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mrow" id="MathJax-Span-153"><span class="mi" id="MathJax-Span-154" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.559em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-29">x</script>を<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-155"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mrow" id="MathJax-Span-156"><span class="mi" id="MathJax-Span-157" style="font-family: MathJax_Math; font-style: italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.796em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-30">y</script>ビット右回転シフトする． <span class="anchor" id="line-414"></span><span class="anchor" id="line-415"></span></p></li></ul><p class="line874">回転シフトには二つ注意事項がある． <span class="anchor" id="line-416"></span></p><ul><li>ビットシフト対象とシフト量のビット幅は同じでなければならない． <span class="anchor" id="line-417"></span></li><li>シフト量は常にunsigned扱いされる． <span class="anchor" id="line-418"></span><span class="anchor" id="line-419"></span></li></ul><p class="line867">
</p><h3 id="A.2BMLww7WLhXzU-">ゼロ拡張</h3>
<span class="anchor" id="line-420"></span><p class="line862">ビットベクトル<tt class="backtick">x</tt>に<tt class="backtick">n</tt>ビットの0を加えて拡張するには次のようにする． <span class="anchor" id="line-421"></span><span class="anchor" id="line-422"></span><span class="anchor" id="line-423"></span><span class="anchor" id="line-1-77"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-7a1c31ea83d248ef8319488ef729f087d8deb4a6\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-7a1c31ea83d248ef8319488ef729f087d8deb4a6&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-7a1c31ea83d248ef8319488ef729f087d8deb4a6" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-7a1c31ea83d248ef8319488ef729f087d8deb4a6_1">   1</a> </span><span class="LineAnchor" id="CA-7a1c31ea83d248ef8319488ef729f087d8deb4a6_1"></span><span class="anchor" id="line-1-78"></span><span class="ID">ZeroExt</span>(<span class="ID">n</span>, <span class="ID">x</span>)</span>
</pre></div></div><span class="anchor" id="line-424"></span><span class="anchor" id="line-425"></span><p class="line867">
</p><h3 id="A.2BeyZT92LhXzU-">符号拡張</h3>
<span class="anchor" id="line-426"></span><p class="line862">ビットベクトル<tt class="backtick">x</tt>に<tt class="backtick">n</tt>ビットを加えて符号拡張するには次のようにする． <span class="anchor" id="line-427"></span><span class="anchor" id="line-428"></span><span class="anchor" id="line-429"></span><span class="anchor" id="line-1-79"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-5c924f37fd27587362932e15e21c647f7763f370\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-5c924f37fd27587362932e15e21c647f7763f370&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-5c924f37fd27587362932e15e21c647f7763f370" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5c924f37fd27587362932e15e21c647f7763f370_1">   1</a> </span><span class="LineAnchor" id="CA-5c924f37fd27587362932e15e21c647f7763f370_1"></span><span class="anchor" id="line-1-80"></span><span class="ID">SignExt</span>(<span class="ID">n</span>, <span class="ID">x</span>)</span>
</pre></div></div><span class="anchor" id="line-430"></span><span class="anchor" id="line-431"></span><p class="line867">
</p><h3 id="A.2BkOhSBjDTMMMwyFIXMG5SBzCKUfowVw-">部分ビット列の切り出し</h3>
<span class="anchor" id="line-432"></span><p class="line862">ビットベクトル<tt class="backtick">x</tt>の第<tt class="backtick">l</tt>ビット目から第<tt class="backtick">h</tt>ビット目(0オリジンで最下位ビットから)までを切り出すには次のようにする． <span class="anchor" id="line-433"></span>つまり切り出し後のビット数は<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-158"><span style="display: inline-block; position: relative; width: 3.76em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.881em, 1000em, 2.963em, -0.409em);"><span class="mrow" id="MathJax-Span-159"><span class="mi" id="MathJax-Span-160" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mo" id="MathJax-Span-161" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-162" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">l</span><span class="mo" id="MathJax-Span-163" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-164" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.956em; vertical-align: -0.102em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-31">h-l+1</script>となる． <span class="anchor" id="line-434"></span><span class="anchor" id="line-435"></span><span class="anchor" id="line-436"></span><span class="anchor" id="line-1-81"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-32651482d57db25461067cf81a7d878d850514c1\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-32651482d57db25461067cf81a7d878d850514c1&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-32651482d57db25461067cf81a7d878d850514c1" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-32651482d57db25461067cf81a7d878d850514c1_1">   1</a> </span><span class="LineAnchor" id="CA-32651482d57db25461067cf81a7d878d850514c1_1"></span><span class="anchor" id="line-1-82"></span><span class="ID">Extract</span>(<span class="ID">h</span>, <span class="ID">l</span>, <span class="ID">x</span>)</span>
</pre></div></div><span class="anchor" id="line-437"></span><span class="anchor" id="line-438"></span><p class="line867">
</p><h3 id="A.2BMNMwwzDIMNkwrzDIMOswSzCJZXRlcFeLMGtZCWPb-">ビットベクトルから整数型に変換</h3>
<span class="anchor" id="line-439"></span><p class="line862">ビットベクトル<tt class="backtick">x</tt>を符号なしの整数型に変換するには次のようにする． <span class="anchor" id="line-440"></span><span class="anchor" id="line-441"></span><span class="anchor" id="line-442"></span><span class="anchor" id="line-1-83"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-696fbec973d84ffef9451c9555389f05ffa9ddcd\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-696fbec973d84ffef9451c9555389f05ffa9ddcd&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-696fbec973d84ffef9451c9555389f05ffa9ddcd" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-696fbec973d84ffef9451c9555389f05ffa9ddcd_1">   1</a> </span><span class="LineAnchor" id="CA-696fbec973d84ffef9451c9555389f05ffa9ddcd_1"></span><span class="anchor" id="line-1-84"></span><span class="ID">BV2Int</span>(<span class="ID">x</span>)</span>
</pre></div></div><span class="anchor" id="line-443"></span><span class="anchor" id="line-444"></span><p class="line874">符号付きの整数型に変換する方法は用意されていないようなので，次のように条件分岐を挟む必要があるだろう． <span class="anchor" id="line-445"></span><span class="anchor" id="line-446"></span><span class="anchor" id="line-447"></span><span class="anchor" id="line-1-85"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-53787248a1cd54c22117824828c601ea7df81138\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-53787248a1cd54c22117824828c601ea7df81138&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-53787248a1cd54c22117824828c601ea7df81138" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-53787248a1cd54c22117824828c601ea7df81138_1">   1</a> </span><span class="LineAnchor" id="CA-53787248a1cd54c22117824828c601ea7df81138_1"></span><span class="anchor" id="line-1-86"></span><span class="ID">If</span>(<span class="ID">x</span> &lt; <span class="Number">0</span>, <span class="ID">BV2Int</span>(<span class="ID">x</span>) - <span class="Number">2</span> ** <span class="ID">x</span>.<span class="ID">size</span>(), <span class="ID">BV2Int</span>(<span class="ID">x</span>))</span>
</pre></div></div><span class="anchor" id="line-448"></span><span class="anchor" id="line-449"></span><p class="line867">
</p><h2 id="A.2BUUWNs1PvgP1gJzCSUiRbmjBZMItluWzV-">充足可能性を判定する方法</h2>
<span class="anchor" id="line-450"></span><p class="line862">制約を追加したソルバオブジェクトに対し，<tt class="backtick">check</tt>メソッドを実行することで，与えた制約に対する充足可能性が判定できる． <span class="anchor" id="line-451"></span><span class="anchor" id="line-452"></span></p><p class="line867"><tt class="backtick">check</tt>メソッドは<tt class="backtick">sat</tt>, <tt class="backtick">unsat</tt>, <tt class="backtick">unknown</tt>の三種類の値を返す．これらは定数値として定義されている． <span class="anchor" id="line-453"></span><span class="anchor" id="line-454"></span><span class="anchor" id="line-455"></span><span class="anchor" id="line-456"></span><span class="anchor" id="line-457"></span><span class="anchor" id="line-458"></span><span class="anchor" id="line-459"></span><span class="anchor" id="line-460"></span><span class="anchor" id="line-461"></span></p><pre><span class="anchor" id="line-1-4"></span>&gt;&gt;&gt; x = Int("x")
<span class="anchor" id="line-2-4"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3-3"></span>&gt;&gt;&gt; s.add(x &lt; 0, x &gt; 1)
<span class="anchor" id="line-4-3"></span>&gt;&gt;&gt; r = s.check(); r
<span class="anchor" id="line-5-3"></span>unsat
<span class="anchor" id="line-6-3"></span>&gt;&gt;&gt; r == unsat
<span class="anchor" id="line-7-2"></span>True</pre><span class="anchor" id="line-462"></span><span class="anchor" id="line-463"></span><p class="line867">
</p><h2 id="A.2BUUWNs4njMJJflzCLZbls1Q-">充足解を得る方法</h2>
<span class="anchor" id="line-464"></span><p class="line862">充足解を得るためには，まず<tt class="backtick">check</tt>メソッドで充足可能性を判定し，その後に<tt class="backtick">model</tt>メソッドでモデルを取得する． <span class="anchor" id="line-465"></span>得られたモデルを文字列化して表示すると充足解が表示されるため，手作業で行うときはこれでも良いが， <span class="anchor" id="line-466"></span>プログラム上で解を利用するためには，次のようにしてモデルから対応する変数を取り出し， <span class="anchor" id="line-467"></span>z3pyの型から通常のPythonの型に変換する必要がある． <span class="anchor" id="line-468"></span><span class="anchor" id="line-469"></span><span class="anchor" id="line-470"></span><span class="anchor" id="line-471"></span><span class="anchor" id="line-472"></span><span class="anchor" id="line-473"></span><span class="anchor" id="line-474"></span><span class="anchor" id="line-475"></span><span class="anchor" id="line-476"></span><span class="anchor" id="line-477"></span></p><pre><span class="anchor" id="line-1-5"></span>&gt;&gt;&gt; x, y = Ints("x y")
<span class="anchor" id="line-2-5"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3-4"></span>&gt;&gt;&gt; s.add(0 &lt;= x, x &lt;= 1)
<span class="anchor" id="line-4-4"></span>&gt;&gt;&gt; s.add(x &lt; y)
<span class="anchor" id="line-5-4"></span>&gt;&gt;&gt; s.check()
<span class="anchor" id="line-6-4"></span>sat
<span class="anchor" id="line-7-3"></span>&gt;&gt;&gt; m = s.model(); m
<span class="anchor" id="line-8-2"></span>[x = 0, y = 1]</pre><span class="anchor" id="line-478"></span><span class="anchor" id="line-479"></span><p class="line862">まず，モデル<tt class="backtick">m</tt>から変数<tt class="backtick">x</tt>を表すオブジェクトに変換するためには辞書のように <tt class="backtick">m[x]</tt> とする． <span class="anchor" id="line-480"></span>ここで<tt class="backtick">x</tt>は変数名ではなく変数のオブジェクトであることに注意する． <span class="anchor" id="line-481"></span><tt class="backtick">m[x]</tt>を表示すると一見，整数や真偽値が得られているように見えるが， <span class="anchor" id="line-482"></span><strong>実際にはz3pyのオブジェクト</strong>なので変換が必要である． <span class="anchor" id="line-483"></span><span class="anchor" id="line-484"></span><span class="anchor" id="line-485"></span><span class="anchor" id="line-486"></span><span class="anchor" id="line-487"></span><span class="anchor" id="line-488"></span><span class="anchor" id="line-489"></span><span class="anchor" id="line-490"></span></p><pre><span class="anchor" id="line-1-6"></span>&gt;&gt;&gt; m[x]
<span class="anchor" id="line-2-6"></span>0
<span class="anchor" id="line-3-5"></span>&gt;&gt;&gt; type(m[x])
<span class="anchor" id="line-4-5"></span>&lt;type 'instance'&gt;
<span class="anchor" id="line-5-5"></span>&gt;&gt;&gt; m[x] == 0
<span class="anchor" id="line-6-5"></span>0 == 0</pre><span class="anchor" id="line-491"></span><span class="anchor" id="line-492"></span><p class="line862">以下では，<tt class="backtick">m[x]</tt>から各種の型に変換する方法を述べる． <span class="anchor" id="line-493"></span><span class="anchor" id="line-494"></span></p><p class="line867">
</p><h3 id="A.2BMNYw.2FDDrWQllcDBuieMwkl.2BXMIs-">ブール変数の解を得る</h3>
<span class="anchor" id="line-495"></span><p class="line867"><tt class="backtick">x</tt>がブール変数であるとする．このとき次のようにして<tt class="backtick">m[x]</tt>の真偽値を得ることが出来る． <span class="anchor" id="line-496"></span><span class="anchor" id="line-497"></span><span class="anchor" id="line-498"></span><span class="anchor" id="line-1-87"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-9f3cb6dac493f68bcca7c1f14916c1a5c3a7e2d5\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-9f3cb6dac493f68bcca7c1f14916c1a5c3a7e2d5&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-9f3cb6dac493f68bcca7c1f14916c1a5c3a7e2d5" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-9f3cb6dac493f68bcca7c1f14916c1a5c3a7e2d5_1">   1</a> </span><span class="LineAnchor" id="CA-9f3cb6dac493f68bcca7c1f14916c1a5c3a7e2d5_1"></span><span class="anchor" id="line-1-88"></span><span class="ID">is_true</span>(<span class="ID">m</span>[<span class="ID">x</span>])</span>
</pre></div></div><span class="anchor" id="line-499"></span><span class="anchor" id="line-500"></span><p class="line874">例 <span class="anchor" id="line-501"></span><span class="anchor" id="line-502"></span><span class="anchor" id="line-503"></span><span class="anchor" id="line-504"></span><span class="anchor" id="line-505"></span><span class="anchor" id="line-506"></span><span class="anchor" id="line-507"></span><span class="anchor" id="line-508"></span><span class="anchor" id="line-509"></span><span class="anchor" id="line-510"></span></p><pre><span class="anchor" id="line-1-7"></span>&gt;&gt;&gt; x = Bool("x")
<span class="anchor" id="line-2-7"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3-6"></span>&gt;&gt;&gt; s.add(Not(x))
<span class="anchor" id="line-4-6"></span>&gt;&gt;&gt; s.check()
<span class="anchor" id="line-5-6"></span>sat
<span class="anchor" id="line-6-6"></span>&gt;&gt;&gt; m = s.model()
<span class="anchor" id="line-7-4"></span>&gt;&gt;&gt; is_true(m[x])
<span class="anchor" id="line-8-3"></span>False</pre><span class="anchor" id="line-511"></span><span class="anchor" id="line-512"></span><p class="line867">
</p><h3 id="A.2BZXRlcFkJZXAwbonjMJJflzCL-">整数変数の解を得る</h3>
<span class="anchor" id="line-513"></span><p class="line867"><tt class="backtick">x</tt>が整数変数であるとする．このとき次のようにして<tt class="backtick">m[x]</tt>の整数値を得ることが出来る． <span class="anchor" id="line-514"></span><span class="anchor" id="line-515"></span><span class="anchor" id="line-516"></span><span class="anchor" id="line-1-89"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-07be7fa7f83e230b9dce979266f0741384dac901\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-07be7fa7f83e230b9dce979266f0741384dac901&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-07be7fa7f83e230b9dce979266f0741384dac901" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-07be7fa7f83e230b9dce979266f0741384dac901_1">   1</a> </span><span class="LineAnchor" id="CA-07be7fa7f83e230b9dce979266f0741384dac901_1"></span><span class="anchor" id="line-1-90"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">as_long</span>()</span>
</pre></div></div><span class="anchor" id="line-517"></span><span class="anchor" id="line-518"></span><p class="line874">例 <span class="anchor" id="line-519"></span><span class="anchor" id="line-520"></span><span class="anchor" id="line-521"></span><span class="anchor" id="line-522"></span><span class="anchor" id="line-523"></span><span class="anchor" id="line-524"></span><span class="anchor" id="line-525"></span><span class="anchor" id="line-526"></span><span class="anchor" id="line-527"></span><span class="anchor" id="line-528"></span></p><pre><span class="anchor" id="line-1-8"></span>&gt;&gt;&gt; x = Int("x")
<span class="anchor" id="line-2-8"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3-7"></span>&gt;&gt;&gt; s.add(x * x - x - 2 == 0)
<span class="anchor" id="line-4-7"></span>&gt;&gt;&gt; s.check()
<span class="anchor" id="line-5-7"></span>sat
<span class="anchor" id="line-6-7"></span>&gt;&gt;&gt; m = s.model()
<span class="anchor" id="line-7-5"></span>&gt;&gt;&gt; m[x].as_long()
<span class="anchor" id="line-8-4"></span>2</pre><span class="anchor" id="line-529"></span><span class="anchor" id="line-530"></span><p class="line867">
</p><h3 id="A.2BW59lcFkJZXAwbonjMJJrY3i6MGpnCXQGZXAwaDBXMGZflzCL-">実数変数の解を正確な有理数として得る</h3>
<span class="anchor" id="line-531"></span><p class="line867"><tt class="backtick">x</tt>が実数変数であり，充足解が有理数として得られているとする． <span class="anchor" id="line-532"></span>このとき，次のようにして<tt class="backtick">m[x]</tt>の分数表現を得ることが出来る． <span class="anchor" id="line-533"></span><span class="anchor" id="line-534"></span><span class="anchor" id="line-535"></span><span class="anchor" id="line-1-91"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-d87fb1c84768ef269e53dac21d3d8c8116d31665\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-d87fb1c84768ef269e53dac21d3d8c8116d31665&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-d87fb1c84768ef269e53dac21d3d8c8116d31665" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d87fb1c84768ef269e53dac21d3d8c8116d31665_1">   1</a> </span><span class="LineAnchor" id="CA-d87fb1c84768ef269e53dac21d3d8c8116d31665_1"></span><span class="anchor" id="line-1-92"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">as_fraction</span>()</span>
</pre></div></div><span class="anchor" id="line-536"></span><p class="line874">分母と分子をそれぞれ整数値として得たい場合には次のようにする． <span class="anchor" id="line-537"></span><span class="anchor" id="line-538"></span><span class="anchor" id="line-539"></span><span class="anchor" id="line-540"></span><span class="anchor" id="line-541"></span><span class="anchor" id="line-542"></span><span class="anchor" id="line-1-93"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-4759937d304e3fc9e5b39a6de091d33dda5c537d\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-4759937d304e3fc9e5b39a6de091d33dda5c537d&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-4759937d304e3fc9e5b39a6de091d33dda5c537d" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_1">   1</a> </span><span class="LineAnchor" id="CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_1"></span><span class="anchor" id="line-1-94"></span><span class="Comment"># 分母</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_2">   2</a> </span><span class="LineAnchor" id="CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_2"></span><span class="anchor" id="line-2-3"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">denominator_as_long</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_3">   3</a> </span><span class="LineAnchor" id="CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_3"></span><span class="anchor" id="line-3-3"></span><span class="Comment"># 分子</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_4">   4</a> </span><span class="LineAnchor" id="CA-4759937d304e3fc9e5b39a6de091d33dda5c537d_4"></span><span class="anchor" id="line-4-3"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">numerator_as_long</span>()</span>
</pre></div></div><span class="anchor" id="line-543"></span><span class="anchor" id="line-544"></span><p class="line867"><tt class="backtick">m[x]</tt>が有理数として得られているかどうかは次のようにして判定できる． <span class="anchor" id="line-545"></span><span class="anchor" id="line-546"></span><span class="anchor" id="line-547"></span><span class="anchor" id="line-1-95"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-bd3e0f8d46441c51d01c6d5043d639cd50f78f5c\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-bd3e0f8d46441c51d01c6d5043d639cd50f78f5c&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-bd3e0f8d46441c51d01c6d5043d639cd50f78f5c" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bd3e0f8d46441c51d01c6d5043d639cd50f78f5c_1">   1</a> </span><span class="LineAnchor" id="CA-bd3e0f8d46441c51d01c6d5043d639cd50f78f5c_1"></span><span class="anchor" id="line-1-96"></span><span class="ID">is_rational_value</span>(<span class="ID">m</span>[<span class="ID">x</span>])</span>
</pre></div></div><span class="anchor" id="line-548"></span><span class="anchor" id="line-549"></span><p class="line874">例 <span class="anchor" id="line-550"></span><span class="anchor" id="line-551"></span><span class="anchor" id="line-552"></span><span class="anchor" id="line-553"></span><span class="anchor" id="line-554"></span><span class="anchor" id="line-555"></span><span class="anchor" id="line-556"></span><span class="anchor" id="line-557"></span><span class="anchor" id="line-558"></span><span class="anchor" id="line-559"></span><span class="anchor" id="line-560"></span><span class="anchor" id="line-561"></span><span class="anchor" id="line-562"></span><span class="anchor" id="line-563"></span><span class="anchor" id="line-564"></span><span class="anchor" id="line-565"></span></p><pre><span class="anchor" id="line-1-9"></span>&gt;&gt;&gt; x = Real("x")
<span class="anchor" id="line-2-9"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3-8"></span>&gt;&gt;&gt; s.add(x * 2 == 1)
<span class="anchor" id="line-4-8"></span>&gt;&gt;&gt; s.check()
<span class="anchor" id="line-5-8"></span>sat
<span class="anchor" id="line-6-8"></span>&gt;&gt;&gt; m = s.model()
<span class="anchor" id="line-7-6"></span>&gt;&gt;&gt; is_rational_value(m[x])
<span class="anchor" id="line-8-5"></span>True
<span class="anchor" id="line-9"></span>&gt;&gt;&gt; m[x].as_fraction()
<span class="anchor" id="line-10"></span>Fraction(1, 2)
<span class="anchor" id="line-11"></span>&gt;&gt;&gt; m[x].denominator_as_long()
<span class="anchor" id="line-12"></span>2
<span class="anchor" id="line-13"></span>&gt;&gt;&gt; m[x].numerator_as_long()
<span class="anchor" id="line-14"></span>1</pre><span class="anchor" id="line-566"></span><span class="anchor" id="line-567"></span><p class="line867">
</p><h3 id="A.2BW59lcFkJZXAwbonjMJKP0U88MFUwjDBfZwl0BmVwMGgwVzBmX5cwiw-">実数変数の解を近似された有理数として得る</h3>
<span class="anchor" id="line-568"></span><p class="line867"><tt class="backtick">x</tt>が実数変数であり，充足解が無理数として得られており， <span class="anchor" id="line-569"></span>誤差<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-165"><span style="display: inline-block; position: relative; width: 2.083em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.869em, 1000em, 2.902em, -0.374em);"><span class="mrow" id="MathJax-Span-166"><span class="msubsup" id="MathJax-Span-167"><span style="display: inline-block; position: relative; width: 2.081em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.909em, 1000em, 2.902em, -0.374em);"><span class="mn" id="MathJax-Span-168" style="font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -3.12em; left: 1.091em;"><span class="texatom" id="MathJax-Span-169"><span class="mrow" id="MathJax-Span-170"><span class="mo" id="MathJax-Span-171" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mi" id="MathJax-Span-172" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">p</span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.895em; vertical-align: -0.027em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-32">10^{-p}</script>以下で近似された有理数を得たいとする． <span class="anchor" id="line-570"></span>このとき，次のようにして<tt class="backtick">m[x]</tt>の近似された分数表現を得ることが出来る． <span class="anchor" id="line-571"></span><span class="anchor" id="line-572"></span><span class="anchor" id="line-573"></span><span class="anchor" id="line-1-97"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-ef98d9bc02e42d0eda49ee24dbf8a02d4088b919\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-ef98d9bc02e42d0eda49ee24dbf8a02d4088b919&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-ef98d9bc02e42d0eda49ee24dbf8a02d4088b919" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-ef98d9bc02e42d0eda49ee24dbf8a02d4088b919_1">   1</a> </span><span class="LineAnchor" id="CA-ef98d9bc02e42d0eda49ee24dbf8a02d4088b919_1"></span><span class="anchor" id="line-1-98"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">approx</span>(<span class="ID">p</span>).<span class="ID">as_fraction</span>()</span>
</pre></div></div><span class="anchor" id="line-574"></span><span class="anchor" id="line-575"></span><p class="line862">逆に<strong>解が有理数として得られている時に，<tt class="backtick">approx</tt>メソッドを呼び出すとエラーになる</strong>ため注意が必要である． <span class="anchor" id="line-576"></span>つまり，実際には次のようにするのが良い． <span class="anchor" id="line-577"></span><span class="anchor" id="line-578"></span><span class="anchor" id="line-579"></span><span class="anchor" id="line-1-99"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-2a1f2ad5ecaca84f8c8565dd337f59d371b2272a\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-2a1f2ad5ecaca84f8c8565dd337f59d371b2272a&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-2a1f2ad5ecaca84f8c8565dd337f59d371b2272a" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-2a1f2ad5ecaca84f8c8565dd337f59d371b2272a_1">   1</a> </span><span class="LineAnchor" id="CA-2a1f2ad5ecaca84f8c8565dd337f59d371b2272a_1"></span><span class="anchor" id="line-1-100"></span>(<span class="ID">m</span>[<span class="ID">x</span>] <span class="ResWord">if</span> <span class="ID">is_rational_value</span>(<span class="ID">m</span>[<span class="ID">x</span>]) <span class="ResWord">else</span> <span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">approx</span>(<span class="ID">p</span>)).<span class="ID">as_fraction</span>()</span>
</pre></div></div><span class="anchor" id="line-580"></span><span class="anchor" id="line-581"></span><p class="line874">例 <span class="anchor" id="line-582"></span><span class="anchor" id="line-583"></span><span class="anchor" id="line-584"></span><span class="anchor" id="line-585"></span><span class="anchor" id="line-586"></span><span class="anchor" id="line-587"></span><span class="anchor" id="line-588"></span><span class="anchor" id="line-589"></span><span class="anchor" id="line-590"></span><span class="anchor" id="line-591"></span><span class="anchor" id="line-592"></span><span class="anchor" id="line-593"></span><span class="anchor" id="line-594"></span><span class="anchor" id="line-595"></span></p><pre><span class="anchor" id="line-1-10"></span>&gt;&gt;&gt; x = Real("x")
<span class="anchor" id="line-2-10"></span>&gt;&gt;&gt; s = Solver()
<span class="anchor" id="line-3-9"></span>&gt;&gt;&gt; s.add(x ** 2 == 2)
<span class="anchor" id="line-4-9"></span>&gt;&gt;&gt; s.check()
<span class="anchor" id="line-5-9"></span>sat
<span class="anchor" id="line-6-9"></span>&gt;&gt;&gt; m = s.model()
<span class="anchor" id="line-7-7"></span>&gt;&gt;&gt; is_rational_value(m[x])
<span class="anchor" id="line-8-6"></span>False
<span class="anchor" id="line-9-1"></span>&gt;&gt;&gt; m[x].approx(10)
<span class="anchor" id="line-10-1"></span>-3109888511975/2199023255552
<span class="anchor" id="line-11-1"></span>&gt;&gt;&gt; m[x].approx(10).as_fraction()
<span class="anchor" id="line-12-1"></span>Fraction(-3109888511975, 2199023255552)</pre><span class="anchor" id="line-596"></span><span class="anchor" id="line-597"></span><p class="line867">
</p><h3 id="A.2BW59lcFkJZXAwbonjMJJtblLVXA9lcHC5ZXAwaDBXMGZflzCL-">実数変数の解を浮動小数点数として得る</h3>
<span class="anchor" id="line-598"></span><p class="line862">十分な精度でFraction型に変換した後に<tt class="backtick">float</tt>関数で浮動小数点型に変換すれば良い． <span class="anchor" id="line-599"></span><span class="anchor" id="line-600"></span></p><p class="line867">
</p><h3 id="A.2BMNMwwzDIMNkwrzDIMOtZCWVwMG6J4zCSeyZT907YME0wbmV0ZXAwaDBXMGZflzCL-">ビットベクトル変数の解を符号付きの整数として得る</h3>
<span class="anchor" id="line-601"></span><p class="line867"><tt class="backtick">x</tt>がビットベクトル変数であるとする．このとき次のようにして<tt class="backtick">m[x]</tt>の符号付きの整数値を得ることが出来る． <span class="anchor" id="line-602"></span><span class="anchor" id="line-603"></span><span class="anchor" id="line-604"></span><span class="anchor" id="line-1-101"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-6869ddefaef70105697c4f47182fc818766873c3\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-6869ddefaef70105697c4f47182fc818766873c3&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-6869ddefaef70105697c4f47182fc818766873c3" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-6869ddefaef70105697c4f47182fc818766873c3_1">   1</a> </span><span class="LineAnchor" id="CA-6869ddefaef70105697c4f47182fc818766873c3_1"></span><span class="anchor" id="line-1-102"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">as_signed_long</span>()</span>
</pre></div></div><span class="anchor" id="line-605"></span><span class="anchor" id="line-606"></span><p class="line867">
</p><h3 id="A.2BMNMwwzDIMNkwrzDIMOtZCWVwMG6J4zCSeyZT93EhMFcwbmV0ZXAwaDBXMGZflzCL-">ビットベクトル変数の解を符号無しの整数として得る</h3>
<span class="anchor" id="line-607"></span><p class="line867"><tt class="backtick">x</tt>がビットベクトル変数であるとする．このとき次のようにして<tt class="backtick">m[x]</tt>の符号無しの整数値を得ることが出来る． <span class="anchor" id="line-608"></span><span class="anchor" id="line-609"></span><span class="anchor" id="line-610"></span><span class="anchor" id="line-1-103"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-07be7fa7f83e230b9dce979266f0741384dac901-1\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-07be7fa7f83e230b9dce979266f0741384dac901-1&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-07be7fa7f83e230b9dce979266f0741384dac901-1" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-07be7fa7f83e230b9dce979266f0741384dac901-1_1">   1</a> </span><span class="LineAnchor" id="CA-07be7fa7f83e230b9dce979266f0741384dac901-1_1"></span><span class="anchor" id="line-1-104"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">as_long</span>()</span>
</pre></div></div><span class="anchor" id="line-611"></span><span class="anchor" id="line-612"></span><p class="line867">
</p><h3 id="A.2BUhdjGVeLWQllcDBuieMwklIXYxlXizBuiYF9IDBuVA158DBoMFcwZl.2BXMIs-">列挙型変数の解を列挙型の要素の名称として得る</h3>
<span class="anchor" id="line-613"></span><p class="line867"><tt class="backtick">x</tt>が列挙型変数であるとする．このとき<tt class="backtick">m[x]</tt>の値を列挙型の要素の名称として得るには，次のようにすれば良い． <span class="anchor" id="line-614"></span><span class="anchor" id="line-615"></span><span class="anchor" id="line-616"></span><span class="anchor" id="line-1-105"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-f44d57bd6de005128263b31a781634658b709825\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-f44d57bd6de005128263b31a781634658b709825&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-f44d57bd6de005128263b31a781634658b709825" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-f44d57bd6de005128263b31a781634658b709825_1">   1</a> </span><span class="LineAnchor" id="CA-f44d57bd6de005128263b31a781634658b709825_1"></span><span class="anchor" id="line-1-106"></span><span class="ResWord">str</span>(<span class="ID">m</span>[<span class="ID">x</span>])</span>
</pre></div></div><span class="anchor" id="line-617"></span><span class="anchor" id="line-618"></span><p class="line867">
</p><h3 id="A.2BUhdjGVeLWQllcDBuieMwaImBfSAwblQMUCRgJzCSUiRbmjBZMIs-">列挙型変数の解と要素の同値性を判定する</h3>
<span class="anchor" id="line-619"></span><p class="line867"><tt class="backtick">x</tt>が列挙型変数であるとする．このとき<tt class="backtick">m[x]</tt>の値が<tt class="backtick">rock</tt>であることを判定するには次のようにすれば良い． <span class="anchor" id="line-620"></span><span class="anchor" id="line-621"></span><span class="anchor" id="line-622"></span><span class="anchor" id="line-1-107"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b591d9f139a0e2d06ef868bcfeeaa1c30da32b03\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-b591d9f139a0e2d06ef868bcfeeaa1c30da32b03&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-b591d9f139a0e2d06ef868bcfeeaa1c30da32b03" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b591d9f139a0e2d06ef868bcfeeaa1c30da32b03_1">   1</a> </span><span class="LineAnchor" id="CA-b591d9f139a0e2d06ef868bcfeeaa1c30da32b03_1"></span><span class="anchor" id="line-1-108"></span><span class="ID">m</span>[<span class="ID">x</span>].<span class="ID">eq</span>(<span class="ID">rock</span>)</span>
</pre></div></div><span class="anchor" id="line-623"></span><span class="anchor" id="line-624"></span><p class="line867">
</p><h2 id="A.2BT4s-">例</h2>
<span class="anchor" id="line-625"></span><p class="line867">
</p><h3 id="A.2Bm1RluZZj-">魔方陣</h3>
<span class="anchor" id="line-626"></span><p class="line874"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-173"><span style="display: inline-block; position: relative; width: 2.388em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.084em, 1000em, 2.891em, -0.436em);"><span class="mrow" id="MathJax-Span-174"><span class="mi" id="MathJax-Span-175" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-176" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-177" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.618em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-33">n \times n</script>の魔方陣を生成する． <span class="anchor" id="line-627"></span><span class="anchor" id="line-628"></span><span class="anchor" id="line-629"></span><span class="anchor" id="line-630"></span><span class="anchor" id="line-631"></span><span class="anchor" id="line-632"></span><span class="anchor" id="line-633"></span><span class="anchor" id="line-634"></span><span class="anchor" id="line-635"></span><span class="anchor" id="line-636"></span><span class="anchor" id="line-637"></span><span class="anchor" id="line-638"></span><span class="anchor" id="line-639"></span><span class="anchor" id="line-640"></span><span class="anchor" id="line-641"></span><span class="anchor" id="line-642"></span><span class="anchor" id="line-643"></span><span class="anchor" id="line-644"></span><span class="anchor" id="line-645"></span><span class="anchor" id="line-646"></span><span class="anchor" id="line-647"></span><span class="anchor" id="line-648"></span><span class="anchor" id="line-649"></span><span class="anchor" id="line-650"></span><span class="anchor" id="line-651"></span><span class="anchor" id="line-652"></span><span class="anchor" id="line-653"></span><span class="anchor" id="line-654"></span><span class="anchor" id="line-655"></span><span class="anchor" id="line-656"></span><span class="anchor" id="line-657"></span><span class="anchor" id="line-658"></span><span class="anchor" id="line-1-109"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-77798d334efed5e063363e9dc63fcb82fa7a053b\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-77798d334efed5e063363e9dc63fcb82fa7a053b&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_1">   1</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_1"></span><span class="anchor" id="line-1-110"></span><span class="ResWord">from</span> <span class="ID">z3</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_2">   2</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_2"></span><span class="anchor" id="line-2-4"></span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_3">   3</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_3"></span><span class="anchor" id="line-3-4"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_4">   4</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_4"></span><span class="anchor" id="line-4-4"></span><span class="ID">n</span> = <span class="Number">4</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_5">   5</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_5"></span><span class="anchor" id="line-5-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_6">   6</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_6"></span><span class="anchor" id="line-6-2"></span><span class="ID">x</span> = [[<span class="ID">Int</span>(<span class="String">"</span><span class="String">x[</span><span class="String">%d</span><span class="String">,</span><span class="String">%d</span><span class="String">]</span><span class="String">"</span> % (<span class="ID">i</span>,<span class="ID">j</span>)) <span class="ResWord">for</span> <span class="ID">j</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="ID">n</span>)] <span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="ID">n</span>)]</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_7">   7</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_7"></span><span class="anchor" id="line-7-2"></span><span class="ID">s</span> = <span class="ID">Solver</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_8">   8</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_8"></span><span class="anchor" id="line-8-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_9">   9</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_9"></span><span class="anchor" id="line-9-2"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="ID">n</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_10">  10</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_10"></span><span class="anchor" id="line-10-2"></span>    <span class="ResWord">for</span> <span class="ID">j</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="ID">n</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_11">  11</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_11"></span><span class="anchor" id="line-11-2"></span>        <span class="ID">s</span>.<span class="ID">add</span>(<span class="Number">1</span> &lt;= <span class="ID">x</span>[<span class="ID">i</span>][<span class="ID">j</span>], <span class="ID">x</span>[<span class="ID">i</span>][<span class="ID">j</span>] &lt;= <span class="ID">n</span>*<span class="ID">n</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_12">  12</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_12"></span><span class="anchor" id="line-12-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_13">  13</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_13"></span><span class="anchor" id="line-13-2"></span><span class="Comment"># all numbers are unique</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_14">  14</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_14"></span><span class="anchor" id="line-14-2"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">Distinct</span>(<span class="ResWord">sum</span>(<span class="ID">x</span>, [])))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_15">  15</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_15"></span><span class="anchor" id="line-15-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_16">  16</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_16"></span><span class="anchor" id="line-16-2"></span><span class="Comment"># all rows have same sum</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_17">  17</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_17"></span><span class="anchor" id="line-17-2"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">1</span>, <span class="ID">n</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_18">  18</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_18"></span><span class="anchor" id="line-18-2"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ResWord">sum</span>(<span class="ID">x</span>[<span class="Number">0</span>]) == <span class="ResWord">sum</span>(<span class="ID">x</span>[<span class="ID">i</span>]))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_19">  19</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_19"></span><span class="anchor" id="line-19-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_20">  20</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_20"></span><span class="anchor" id="line-20-2"></span><span class="Comment"># all columns have same sum</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_21">  21</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_21"></span><span class="anchor" id="line-21-2"></span><span class="ResWord">for</span> <span class="ID">j</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">1</span>, <span class="ID">n</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_22">  22</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_22"></span><span class="anchor" id="line-22-2"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ResWord">sum</span>(<span class="ResWord">map</span>(<span class="ResWord">lambda</span> <span class="ID">row</span>: <span class="ID">row</span>[<span class="Number">0</span>], <span class="ID">x</span>)) == <span class="ResWord">sum</span>(<span class="ResWord">map</span>(<span class="ResWord">lambda</span> <span class="ID">row</span>: <span class="ID">row</span>[<span class="ID">j</span>], <span class="ID">x</span>)))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_23">  23</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_23"></span><span class="anchor" id="line-23-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_24">  24</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_24"></span><span class="anchor" id="line-24-2"></span><span class="ID">s</span>.<span class="ID">check</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_25">  25</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_25"></span><span class="anchor" id="line-25-2"></span><span class="ID">m</span> = <span class="ID">s</span>.<span class="ID">model</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_26">  26</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_26"></span><span class="anchor" id="line-26-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_27">  27</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_27"></span><span class="anchor" id="line-27-2"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="ID">n</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_28">  28</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_28"></span><span class="anchor" id="line-28-1"></span>    <span class="ResWord">for</span> <span class="ID">j</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="ID">n</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_29">  29</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_29"></span><span class="anchor" id="line-29-1"></span>        <span class="ID">sys</span>.<span class="ID">stdout</span>.<span class="ID">write</span>(<span class="String">"</span><span class="String"> </span><span class="String">%2d</span><span class="String">"</span> % <span class="ID">m</span>[ <span class="ID">x</span>[<span class="ID">i</span>][<span class="ID">j</span>] ].<span class="ID">as_long</span>())</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-77798d334efed5e063363e9dc63fcb82fa7a053b_30">  30</a> </span><span class="LineAnchor" id="CA-77798d334efed5e063363e9dc63fcb82fa7a053b_30"></span><span class="anchor" id="line-30-1"></span>    <span class="ID">sys</span>.<span class="ID">stdout</span>.<span class="ID">write</span>(<span class="String">"</span><span class="SPChar">\n</span><span class="String">"</span>)</span>
</pre></div></div><span class="anchor" id="line-659"></span><span class="anchor" id="line-660"></span><p class="line874">この方法ではi7-4771プロセッサで<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-178"><span style="display: inline-block; position: relative; width: 2.388em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.909em, 1000em, 2.902em, -0.436em);"><span class="mrow" id="MathJax-Span-179"><span class="mi" id="MathJax-Span-180" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-181" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-182" style="font-family: MathJax_Main; padding-left: 0.278em;">5</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.846em; vertical-align: -0.027em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-34">n=5</script>を解くのに15秒，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-183"><span style="display: inline-block; position: relative; width: 2.388em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.909em, 1000em, 2.902em, -0.436em);"><span class="mrow" id="MathJax-Span-184"><span class="mi" id="MathJax-Span-185" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-186" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-187" style="font-family: MathJax_Main; padding-left: 0.278em;">6</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.846em; vertical-align: -0.027em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-35">n=6</script>を解くのに603秒を要した．7以上は現実的な時間では無理のようだ．1日後？ <span class="anchor" id="line-661"></span><span class="anchor" id="line-662"></span></p><p class="line874">なお，各行・各列の和を定数として与えてやれば早くなるかと思いきや，むしろ遅くなった． <span class="anchor" id="line-663"></span>余計な判定処理が加わったためだろうか．以下の制約を追加したところ<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-188"><span style="display: inline-block; position: relative; width: 2.388em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.909em, 1000em, 2.902em, -0.436em);"><span class="mrow" id="MathJax-Span-189"><span class="mi" id="MathJax-Span-190" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-191" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-192" style="font-family: MathJax_Main; padding-left: 0.278em;">5</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.846em; vertical-align: -0.027em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-36">n=5</script>で49秒を要した． <span class="anchor" id="line-664"></span><span class="anchor" id="line-665"></span><span class="anchor" id="line-666"></span><span class="anchor" id="line-667"></span><span class="anchor" id="line-668"></span><span class="anchor" id="line-1-111"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-b164f5fce9e55b6de07723903cbe1a13e23ec384\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-b164f5fce9e55b6de07723903cbe1a13e23ec384&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-b164f5fce9e55b6de07723903cbe1a13e23ec384" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b164f5fce9e55b6de07723903cbe1a13e23ec384_1">   1</a> </span><span class="LineAnchor" id="CA-b164f5fce9e55b6de07723903cbe1a13e23ec384_1"></span><span class="anchor" id="line-1-112"></span><span class="Comment"># sum is n(n*n+1)/2</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b164f5fce9e55b6de07723903cbe1a13e23ec384_2">   2</a> </span><span class="LineAnchor" id="CA-b164f5fce9e55b6de07723903cbe1a13e23ec384_2"></span><span class="anchor" id="line-2-5"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ResWord">sum</span>(<span class="ID">x</span>[<span class="Number">0</span>]) == <span class="ID">n</span>*(<span class="ID">n</span>*<span class="ID">n</span>+<span class="Number">1</span>)/<span class="Number">2</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-b164f5fce9e55b6de07723903cbe1a13e23ec384_3">   3</a> </span><span class="LineAnchor" id="CA-b164f5fce9e55b6de07723903cbe1a13e23ec384_3"></span><span class="anchor" id="line-3-5"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ResWord">sum</span>(<span class="ResWord">map</span>(<span class="ResWord">lambda</span> <span class="ID">row</span>: <span class="ID">row</span>[<span class="Number">0</span>], <span class="ID">x</span>)) == <span class="ID">n</span>*(<span class="ID">n</span>*<span class="ID">n</span>+<span class="Number">1</span>)/<span class="Number">2</span>)</span>
</pre></div></div><span class="anchor" id="line-669"></span><span class="anchor" id="line-670"></span><p class="line867">
</p><h3 id="A.2BhmuY3zBEe5c-">虫食い算</h3>
<span class="anchor" id="line-671"></span><p class="line874">Googleのアレ <span class="anchor" id="line-672"></span><span class="anchor" id="line-673"></span><span class="anchor" id="line-674"></span><span class="anchor" id="line-675"></span><span class="anchor" id="line-676"></span><span class="anchor" id="line-677"></span></p><pre><span class="anchor" id="line-1-11"></span>  WWWDOT
<span class="anchor" id="line-2-11"></span>- GOOGLE
<span class="anchor" id="line-3-10"></span>--------
<span class="anchor" id="line-4-10"></span>  DOTCOM</pre><span class="anchor" id="line-678"></span><span class="anchor" id="line-679"></span><p class="line874">値<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-193"><span style="display: inline-block; position: relative; width: 17.121em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 3.128em, -0.422em);"><span class="mrow" id="MathJax-Span-194"><span class="mi" id="MathJax-Span-195" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-196" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-197" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.115em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mi" id="MathJax-Span-198" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.634em;"><span class="mi" id="MathJax-Span-199" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-200" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="msubsup" id="MathJax-Span-201" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.064em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mi" id="MathJax-Span-202" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.634em;"><span class="mn" id="MathJax-Span-203" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-204" style="font-family: MathJax_Main;">,</span><span class="mspace" id="MathJax-Span-205" style="font-size: 70.7%; height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block;"></span><span class="mi" id="MathJax-Span-206" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y</span><span class="mo" id="MathJax-Span-207" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-208" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.064em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mi" id="MathJax-Span-209" style="font-family: MathJax_Math; font-style: italic;">y</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.487em; left: 0.583em;"><span class="mi" id="MathJax-Span-210" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-211" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="msubsup" id="MathJax-Span-212" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.014em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mi" id="MathJax-Span-213" style="font-family: MathJax_Math; font-style: italic;">y</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.487em; left: 0.583em;"><span class="mn" id="MathJax-Span-214" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-215" style="font-family: MathJax_Main;">,</span><span class="mspace" id="MathJax-Span-216" style="font-size: 70.7%; height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block;"></span><span class="mi" id="MathJax-Span-217" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">z</span><span class="mo" id="MathJax-Span-218" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-219" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.014em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 2.892em, -0.422em);"><span class="mi" id="MathJax-Span-220" style="font-family: MathJax_Math; font-style: italic;">z</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.532em;"><span class="mi" id="MathJax-Span-221" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-222" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="msubsup" id="MathJax-Span-223" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 0.963em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 2.892em, -0.422em);"><span class="mi" id="MathJax-Span-224" style="font-family: MathJax_Math; font-style: italic;">z</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.532em;"><span class="mn" id="MathJax-Span-225" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.85em; vertical-align: -0.305em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-37">x = x_n \dots x_1,\, y = y_n \dots y_1,\, z = z_n \dots z_1</script>に関する減算<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-226"><span style="display: inline-block; position: relative; width: 4.014em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 3.085em, -0.422em);"><span class="mrow" id="MathJax-Span-227"><span class="mi" id="MathJax-Span-228" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-229" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-230" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y</span><span class="mo" id="MathJax-Span-231" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-232" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">z</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.797em; vertical-align: -0.252em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-38">x - y = z</script>は，各<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-233"><span style="display: inline-block; position: relative; width: 0.356em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.914em, 1000em, 2.891em, -0.436em);"><span class="mrow" id="MathJax-Span-234"><span class="mi" id="MathJax-Span-235" style="font-family: MathJax_Math; font-style: italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.827em; vertical-align: -0.014em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-39">i</script>桁目について，上の桁からのボロー<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-236"><span style="display: inline-block; position: relative; width: 1.727em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.881em, 1000em, 3.088em, -0.418em);"><span class="mrow" id="MathJax-Span-237"><span class="msubsup" id="MathJax-Span-238"><span style="display: inline-block; position: relative; width: 1.725em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.881em, 1000em, 2.891em, -0.418em);"><span class="mi" id="MathJax-Span-239" style="font-family: MathJax_Math; font-style: italic;">b</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.481em;"><span class="texatom" id="MathJax-Span-240"><span class="mrow" id="MathJax-Span-241"><span class="mi" id="MathJax-Span-242" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-243" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-244" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.11em; vertical-align: -0.257em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-40">b_{i+1}</script>を用いて<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-245"><span style="display: inline-block; position: relative; width: 10.11em; height: 0px; font-size: 123%;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.881em, 1000em, 3.128em, -0.422em);"><span class="mrow" id="MathJax-Span-246"><span class="msubsup" id="MathJax-Span-247"><span style="display: inline-block; position: relative; width: 0.963em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.132em, 1000em, 2.891em, -0.422em);"><span class="mi" id="MathJax-Span-248" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.634em;"><span class="mi" id="MathJax-Span-249" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-250" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="msubsup" id="MathJax-Span-251" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 1.725em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.881em, 1000em, 2.891em, -0.418em);"><span class="mi" id="MathJax-Span-252" style="font-family: MathJax_Math; font-style: italic;">b</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.481em;"><span class="texatom" id="MathJax-Span-253"><span class="mrow" id="MathJax-Span-254"><span class="mi" id="MathJax-Span-255" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-256" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-257" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-258" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="msubsup" id="MathJax-Span-259" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 0.912em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 3.085em, -0.436em);"><span class="mi" id="MathJax-Span-260" style="font-family: MathJax_Math; font-style: italic;">y</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.487em; left: 0.583em;"><span class="mi" id="MathJax-Span-261" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-262" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="msubsup" id="MathJax-Span-263" style="padding-left: 0.222em;"><span style="display: inline-block; position: relative; width: 0.81em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(1.881em, 1000em, 2.891em, -0.418em);"><span class="mi" id="MathJax-Span-264" style="font-family: MathJax_Math; font-style: italic;">b</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.481em;"><span class="mi" id="MathJax-Span-265" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span><span class="mo" id="MathJax-Span-266" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="msubsup" id="MathJax-Span-267" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 0.861em; height: 0px;"><span style="position: absolute; top: -2.727em; left: 0em; clip: rect(2.133em, 1000em, 2.892em, -0.422em);"><span class="mi" id="MathJax-Span-268" style="font-family: MathJax_Math; font-style: italic;">z</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span><span style="position: absolute; top: -2.577em; left: 0.532em;"><span class="mi" id="MathJax-Span-269" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.727em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.159em; vertical-align: -0.305em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-41">x_i + b_{i+1} - y_i - b_i = z_i</script>と表すことができる． <span class="anchor" id="line-680"></span>Z3は整数を扱うことができるため変数を整数とし，各桁について値の範囲が0から9となるよう制約を与え，この関係式を制約として与える． <span class="anchor" id="line-681"></span>さらに最上位の桁は0にならないように制約を与え，同じアルファベットは同じ数字，異なるアルファベットは別の数字となるように制約を与える． <span class="anchor" id="line-682"></span><span class="anchor" id="line-683"></span></p><p class="line867"><span class="anchor" id="line-684"></span><span class="anchor" id="line-685"></span><span class="anchor" id="line-686"></span><span class="anchor" id="line-687"></span><span class="anchor" id="line-688"></span><span class="anchor" id="line-689"></span><span class="anchor" id="line-690"></span><span class="anchor" id="line-691"></span><span class="anchor" id="line-692"></span><span class="anchor" id="line-693"></span><span class="anchor" id="line-694"></span><span class="anchor" id="line-695"></span><span class="anchor" id="line-696"></span><span class="anchor" id="line-697"></span><span class="anchor" id="line-698"></span><span class="anchor" id="line-699"></span><span class="anchor" id="line-700"></span><span class="anchor" id="line-701"></span><span class="anchor" id="line-702"></span><span class="anchor" id="line-703"></span><span class="anchor" id="line-704"></span><span class="anchor" id="line-705"></span><span class="anchor" id="line-706"></span><span class="anchor" id="line-707"></span><span class="anchor" id="line-708"></span><span class="anchor" id="line-709"></span><span class="anchor" id="line-710"></span><span class="anchor" id="line-711"></span><span class="anchor" id="line-712"></span><span class="anchor" id="line-713"></span><span class="anchor" id="line-714"></span><span class="anchor" id="line-715"></span><span class="anchor" id="line-716"></span><span class="anchor" id="line-717"></span><span class="anchor" id="line-718"></span><span class="anchor" id="line-719"></span><span class="anchor" id="line-720"></span><span class="anchor" id="line-721"></span><span class="anchor" id="line-722"></span><span class="anchor" id="line-723"></span><span class="anchor" id="line-724"></span><span class="anchor" id="line-725"></span><span class="anchor" id="line-726"></span><span class="anchor" id="line-727"></span><span class="anchor" id="line-728"></span><span class="anchor" id="line-729"></span><span class="anchor" id="line-730"></span><span class="anchor" id="line-731"></span><span class="anchor" id="line-732"></span><span class="anchor" id="line-1-113"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_1">   1</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_1"></span><span class="anchor" id="line-1-114"></span><span class="Comment"># -*- coding: utf-8 -*-</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_2">   2</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_2"></span><span class="anchor" id="line-2-6"></span><span class="Comment"># 大学院のレポートに出したやつ:-p</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_3">   3</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_3"></span><span class="anchor" id="line-3-6"></span><span class="ResWord">from</span> <span class="ID">z3</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_4">   4</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_4"></span><span class="anchor" id="line-4-5"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_5">   5</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_5"></span><span class="anchor" id="line-5-3"></span><span class="ID">W</span>, <span class="ID">D</span>, <span class="ID">O</span>, <span class="ID">T</span>, <span class="ID">G</span>, <span class="ID">L</span>, <span class="ID">E</span>, <span class="ID">C</span>, <span class="ID">M</span> = <span class="ID">Ints</span>(<span class="String">"</span><span class="String">W D O T G L E C M</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_6">   6</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_6"></span><span class="anchor" id="line-6-3"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_7">   7</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_7"></span><span class="anchor" id="line-7-3"></span><span class="Comment"># 筆算の変数</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_8">   8</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_8"></span><span class="anchor" id="line-8-3"></span><span class="Comment">#   x_5 ... x_0</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_9">   9</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_9"></span><span class="anchor" id="line-9-3"></span><span class="Comment"># - y_5 ... y_0</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_10">  10</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_10"></span><span class="anchor" id="line-10-3"></span><span class="Comment"># -------------</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_11">  11</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_11"></span><span class="anchor" id="line-11-3"></span><span class="Comment">#   z_5 ... z_0</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_12">  12</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_12"></span><span class="anchor" id="line-12-3"></span><span class="ID">x</span> = <span class="ID">IntVector</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="Number">6</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_13">  13</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_13"></span><span class="anchor" id="line-13-3"></span><span class="ID">y</span> = <span class="ID">IntVector</span>(<span class="String">"</span><span class="String">y</span><span class="String">"</span>, <span class="Number">6</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_14">  14</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_14"></span><span class="anchor" id="line-14-3"></span><span class="ID">z</span> = <span class="ID">IntVector</span>(<span class="String">"</span><span class="String">z</span><span class="String">"</span>, <span class="Number">6</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_15">  15</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_15"></span><span class="anchor" id="line-15-3"></span><span class="ID">b</span> = <span class="ID">IntVector</span>(<span class="String">"</span><span class="String">b</span><span class="String">"</span>, <span class="Number">7</span>) <span class="Comment"># borrow</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_16">  16</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_16"></span><span class="anchor" id="line-16-3"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_17">  17</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_17"></span><span class="anchor" id="line-17-3"></span><span class="ID">s</span> = <span class="ID">Solver</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_18">  18</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_18"></span><span class="anchor" id="line-18-3"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_19">  19</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_19"></span><span class="anchor" id="line-19-3"></span><span class="Comment"># アルファベットは全て別の数字</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_20">  20</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_20"></span><span class="anchor" id="line-20-3"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">Distinct</span>(<span class="ID">W</span>, <span class="ID">D</span>, <span class="ID">O</span>, <span class="ID">T</span>, <span class="ID">G</span>, <span class="ID">L</span>, <span class="ID">E</span>, <span class="ID">C</span>, <span class="ID">M</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_21">  21</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_21"></span><span class="anchor" id="line-21-3"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_22">  22</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_22"></span><span class="anchor" id="line-22-3"></span><span class="Comment"># 筆算のロジック</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_23">  23</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_23"></span><span class="anchor" id="line-23-3"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">b</span>[<span class="Number">0</span>] == <span class="Number">0</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_24">  24</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_24"></span><span class="anchor" id="line-24-3"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">6</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_25">  25</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_25"></span><span class="anchor" id="line-25-3"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">And</span>(<span class="Number">0</span> &lt;= <span class="ID">x</span>[<span class="ID">i</span>], <span class="ID">x</span>[<span class="ID">i</span>] &lt; <span class="Number">10</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_26">  26</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_26"></span><span class="anchor" id="line-26-3"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">And</span>(<span class="Number">0</span> &lt;= <span class="ID">y</span>[<span class="ID">i</span>], <span class="ID">y</span>[<span class="ID">i</span>] &lt; <span class="Number">10</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_27">  27</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_27"></span><span class="anchor" id="line-27-3"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">And</span>(<span class="Number">0</span> &lt;= <span class="ID">z</span>[<span class="ID">i</span>], <span class="ID">z</span>[<span class="ID">i</span>] &lt; <span class="Number">10</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_28">  28</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_28"></span><span class="anchor" id="line-28-2"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">Or</span>(<span class="ID">b</span>[<span class="ID">i</span>] == <span class="Number">0</span>, <span class="ID">b</span>[<span class="ID">i</span>] == <span class="Number">1</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_29">  29</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_29"></span><span class="anchor" id="line-29-2"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">x</span>[<span class="ID">i</span>] + <span class="ID">b</span>[<span class="ID">i</span>+<span class="Number">1</span>]*<span class="Number">10</span> - <span class="ID">y</span>[<span class="ID">i</span>] - <span class="ID">b</span>[<span class="ID">i</span>] == <span class="ID">z</span>[<span class="ID">i</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_30">  30</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_30"></span><span class="anchor" id="line-30-2"></span><span class="Comment"># 最上位桁は0にならない</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_31">  31</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_31"></span><span class="anchor" id="line-31-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">x</span>[<span class="Number">5</span>] != <span class="Number">0</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_32">  32</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_32"></span><span class="anchor" id="line-32-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">y</span>[<span class="Number">5</span>] != <span class="Number">0</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_33">  33</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_33"></span><span class="anchor" id="line-33-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">z</span>[<span class="Number">5</span>] != <span class="Number">0</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_34">  34</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_34"></span><span class="anchor" id="line-34-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">b</span>[<span class="Number">6</span>] == <span class="Number">0</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_35">  35</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_35"></span><span class="anchor" id="line-35-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_36">  36</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_36"></span><span class="anchor" id="line-36-1"></span><span class="Comment"># アルファベットを筆算に割り当て</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_37">  37</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_37"></span><span class="anchor" id="line-37-1"></span><span class="ResWord">for</span> (<span class="ID">u</span>, <span class="ID">v</span>) <span class="ResWord">in</span> <span class="ResWord">zip</span>([<span class="ID">W</span>,<span class="ID">W</span>,<span class="ID">W</span>,<span class="ID">D</span>,<span class="ID">O</span>,<span class="ID">T</span>], <span class="ID">x</span>[::-<span class="Number">1</span>]):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_38">  38</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_38"></span><span class="anchor" id="line-38-1"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">u</span> == <span class="ID">v</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_39">  39</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_39"></span><span class="anchor" id="line-39-1"></span><span class="ResWord">for</span> (<span class="ID">u</span>, <span class="ID">v</span>) <span class="ResWord">in</span> <span class="ResWord">zip</span>([<span class="ID">G</span>,<span class="ID">O</span>,<span class="ID">O</span>,<span class="ID">G</span>,<span class="ID">L</span>,<span class="ID">E</span>], <span class="ID">y</span>[::-<span class="Number">1</span>]):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_40">  40</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_40"></span><span class="anchor" id="line-40-1"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">u</span> == <span class="ID">v</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_41">  41</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_41"></span><span class="anchor" id="line-41-1"></span><span class="ResWord">for</span> (<span class="ID">u</span>, <span class="ID">v</span>) <span class="ResWord">in</span> <span class="ResWord">zip</span>([<span class="ID">D</span>,<span class="ID">O</span>,<span class="ID">T</span>,<span class="ID">C</span>,<span class="ID">O</span>,<span class="ID">M</span>], <span class="ID">z</span>[::-<span class="Number">1</span>]):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_42">  42</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_42"></span><span class="anchor" id="line-42-1"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">u</span> == <span class="ID">v</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_43">  43</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_43"></span><span class="anchor" id="line-43-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_44">  44</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_44"></span><span class="anchor" id="line-44-1"></span><span class="Comment"># 判定・出力</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_45">  45</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_45"></span><span class="anchor" id="line-45-1"></span><span class="ID">s</span>.<span class="ID">check</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_46">  46</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_46"></span><span class="anchor" id="line-46-1"></span><span class="ID">m</span> = <span class="ID">s</span>.<span class="ID">model</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_47">  47</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_47"></span><span class="anchor" id="line-47-1"></span><span class="ResWord">for</span> <span class="ID">v</span> <span class="ResWord">in</span> [<span class="ID">W</span>, <span class="ID">D</span>, <span class="ID">O</span>, <span class="ID">T</span>, <span class="ID">G</span>, <span class="ID">L</span>, <span class="ID">E</span>, <span class="ID">C</span>, <span class="ID">M</span>]:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_48">  48</a> </span><span class="LineAnchor" id="CA-bb2d6232d408bc9c60e9d5056beee4d6429035e4_48"></span><span class="anchor" id="line-48-1"></span>    <span class="ResWord">print</span> <span class="String">"</span><span class="String">%s</span><span class="String"> = </span><span class="String">%d</span><span class="String">"</span> % (<span class="ID">v</span>, <span class="ID">m</span>[<span class="ID">v</span>].<span class="ID">as_long</span>())</span>
</pre></div></div><span class="anchor" id="line-733"></span><span class="anchor" id="line-734"></span><p class="line862">なお，記事を書くにあたって，制約を<tt class="backtick">x&nbsp;-&nbsp;y&nbsp;==&nbsp;z</tt>の形で記述して，除算と剰余で各桁の値を取り出してアルファベットに割り当てる手法でも実装を試みたが，こちらは短時間では停止しなかった． <span class="anchor" id="line-735"></span><span class="anchor" id="line-736"></span><span class="anchor" id="line-737"></span><span class="anchor" id="line-738"></span><span class="anchor" id="line-739"></span><span class="anchor" id="line-740"></span><span class="anchor" id="line-741"></span><span class="anchor" id="line-742"></span><span class="anchor" id="line-743"></span><span class="anchor" id="line-744"></span><span class="anchor" id="line-745"></span><span class="anchor" id="line-746"></span><span class="anchor" id="line-747"></span><span class="anchor" id="line-748"></span><span class="anchor" id="line-749"></span><span class="anchor" id="line-750"></span><span class="anchor" id="line-1-115"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-5b569115ed05cd5273182a838636b28e452ccc1c\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-5b569115ed05cd5273182a838636b28e452ccc1c&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_1">   1</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_1"></span><span class="anchor" id="line-1-116"></span><span class="Comment"># 引き算の変数</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_2">   2</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_2"></span><span class="anchor" id="line-2-7"></span><span class="ID">xx</span> = <span class="ID">Int</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_3">   3</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_3"></span><span class="anchor" id="line-3-7"></span><span class="ID">yy</span> = <span class="ID">Int</span>(<span class="String">"</span><span class="String">y</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_4">   4</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_4"></span><span class="anchor" id="line-4-6"></span><span class="ID">zz</span> = <span class="ID">Int</span>(<span class="String">"</span><span class="String">z</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_5">   5</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_5"></span><span class="anchor" id="line-5-4"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="Number">100000</span> &lt;= <span class="ID">xx</span>, <span class="ID">xx</span> &lt;= <span class="Number">999999</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_6">   6</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_6"></span><span class="anchor" id="line-6-4"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="Number">100000</span> &lt;= <span class="ID">yy</span>, <span class="ID">yy</span> &lt;= <span class="Number">999999</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_7">   7</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_7"></span><span class="anchor" id="line-7-4"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="Number">100000</span> &lt;= <span class="ID">zz</span>, <span class="ID">zz</span> &lt;= <span class="Number">999999</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_8">   8</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_8"></span><span class="anchor" id="line-8-4"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">xx</span> - <span class="ID">yy</span> == <span class="ID">zz</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_9">   9</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_9"></span><span class="anchor" id="line-9-4"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_10">  10</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_10"></span><span class="anchor" id="line-10-4"></span><span class="Comment"># 各桁の値</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_11">  11</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_11"></span><span class="anchor" id="line-11-4"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">6</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_12">  12</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_12"></span><span class="anchor" id="line-12-4"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">x</span>[<span class="ID">i</span>] == <span class="ID">xx</span> / <span class="ResWord">pow</span>(<span class="Number">10</span>, <span class="ID">i</span>) % <span class="Number">10</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_13">  13</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_13"></span><span class="anchor" id="line-13-4"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">y</span>[<span class="ID">i</span>] == <span class="ID">yy</span> / <span class="ResWord">pow</span>(<span class="Number">10</span>, <span class="ID">i</span>) % <span class="Number">10</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-5b569115ed05cd5273182a838636b28e452ccc1c_14">  14</a> </span><span class="LineAnchor" id="CA-5b569115ed05cd5273182a838636b28e452ccc1c_14"></span><span class="anchor" id="line-14-4"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">z</span>[<span class="ID">i</span>] == <span class="ID">zz</span> / <span class="ResWord">pow</span>(<span class="Number">10</span>, <span class="ID">i</span>) % <span class="Number">10</span>)</span>
</pre></div></div><span class="anchor" id="line-751"></span><span class="anchor" id="line-752"></span><p class="line867">
</p><h3 id="PlaidCTF_2015_RE_GEX">PlaidCTF 2015 RE GEX</h3>
<span class="anchor" id="line-753"></span><p class="line874">PlaidCTF 2015 の Reversing 250 の RE GEX． <span class="anchor" id="line-754"></span><a class="http" href="http://play.plaidctf.com/files/regex_57f2cf49f6a354b4e8896c57a4e3c973.txt">http://play.plaidctf.com/files/regex_57f2cf49f6a354b4e8896c57a4e3c973.txt</a>にマッチしない文字列を探索する． <span class="anchor" id="line-755"></span>次のソルバを3時間程度回すと解が見つかる．なお，PPPによるリファレンス解法では1時間以内に解が得られるらしい． <span class="anchor" id="line-756"></span><span class="anchor" id="line-757"></span><span class="anchor" id="line-758"></span><span class="anchor" id="line-759"></span><span class="anchor" id="line-760"></span><span class="anchor" id="line-761"></span><span class="anchor" id="line-762"></span><span class="anchor" id="line-763"></span><span class="anchor" id="line-764"></span><span class="anchor" id="line-765"></span><span class="anchor" id="line-766"></span><span class="anchor" id="line-767"></span><span class="anchor" id="line-768"></span><span class="anchor" id="line-769"></span><span class="anchor" id="line-770"></span><span class="anchor" id="line-771"></span><span class="anchor" id="line-772"></span><span class="anchor" id="line-773"></span><span class="anchor" id="line-774"></span><span class="anchor" id="line-775"></span><span class="anchor" id="line-776"></span><span class="anchor" id="line-777"></span><span class="anchor" id="line-778"></span><span class="anchor" id="line-779"></span><span class="anchor" id="line-780"></span><span class="anchor" id="line-781"></span><span class="anchor" id="line-782"></span><span class="anchor" id="line-783"></span><span class="anchor" id="line-784"></span><span class="anchor" id="line-785"></span><span class="anchor" id="line-786"></span><span class="anchor" id="line-787"></span><span class="anchor" id="line-788"></span><span class="anchor" id="line-789"></span><span class="anchor" id="line-790"></span><span class="anchor" id="line-791"></span><span class="anchor" id="line-792"></span><span class="anchor" id="line-793"></span><span class="anchor" id="line-794"></span><span class="anchor" id="line-795"></span><span class="anchor" id="line-796"></span><span class="anchor" id="line-797"></span><span class="anchor" id="line-798"></span><span class="anchor" id="line-799"></span><span class="anchor" id="line-800"></span><span class="anchor" id="line-801"></span><span class="anchor" id="line-802"></span><span class="anchor" id="line-803"></span><span class="anchor" id="line-804"></span><span class="anchor" id="line-805"></span><span class="anchor" id="line-806"></span><span class="anchor" id="line-807"></span><span class="anchor" id="line-808"></span><span class="anchor" id="line-809"></span><span class="anchor" id="line-810"></span><span class="anchor" id="line-1-117"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-a3e49e1be4d0fb147e27efff873631d61903d2c0\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-a3e49e1be4d0fb147e27efff873631d61903d2c0&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_1">   1</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_1"></span><span class="anchor" id="line-1-118"></span><span class="ResWord">from</span> <span class="ID">z3</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_2">   2</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_2"></span><span class="anchor" id="line-2-8"></span><span class="ResWord">import</span> <span class="ID">re</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_3">   3</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_3"></span><span class="anchor" id="line-3-8"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_4">   4</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_4"></span><span class="anchor" id="line-4-7"></span><span class="Comment"># setup SAT solver</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_5">   5</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_5"></span><span class="anchor" id="line-5-5"></span><span class="ID">c2i</span> = <span class="ResWord">dict</span>(<span class="ResWord">zip</span>(<span class="ResWord">map</span>(<span class="ResWord">str</span>, <span class="String">'</span><span class="String">plaidctf</span><span class="String">'</span>), <span class="ResWord">range</span>(<span class="Number">8</span>)))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_6">   6</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_6"></span><span class="anchor" id="line-6-5"></span><span class="ID">i2c</span> = <span class="String">"</span><span class="String">plaidctf</span><span class="String">"</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_7">   7</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_7"></span><span class="anchor" id="line-7-5"></span><span class="ID">string</span> = <span class="ID">IntVector</span>(<span class="String">"</span><span class="String">"</span>, <span class="Number">171</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_8">   8</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_8"></span><span class="anchor" id="line-8-5"></span><span class="ID">s</span> = <span class="ID">Solver</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_9">   9</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_9"></span><span class="anchor" id="line-9-5"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">171</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_10">  10</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_10"></span><span class="anchor" id="line-10-5"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="Number">0</span> &lt;= <span class="ID">string</span>[<span class="ID">i</span>], <span class="ID">string</span>[<span class="ID">i</span>] &lt; <span class="Number">8</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_11">  11</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_11"></span><span class="anchor" id="line-11-5"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_12">  12</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_12"></span><span class="anchor" id="line-12-5"></span><span class="ResWord">with</span> <span class="ResWord">open</span>(<span class="String">"</span><span class="String">regex_57f2cf49f6a354b4e8896c57a4e3c973.txt</span><span class="String">"</span>) <span class="ResWord">as</span> <span class="ID">f</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_13">  13</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_13"></span><span class="anchor" id="line-13-5"></span>    <span class="ID">long_regex</span> = <span class="ID">f</span>.<span class="ID">readline</span>().<span class="ID">rstrip</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_14">  14</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_14"></span><span class="anchor" id="line-14-5"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_15">  15</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_15"></span><span class="anchor" id="line-15-4"></span><span class="Comment"># parse regex and add constraints to the solver</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_16">  16</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_16"></span><span class="anchor" id="line-16-4"></span><span class="ResWord">for</span> <span class="ID">regex</span> <span class="ResWord">in</span> <span class="ID">long_regex</span>[<span class="Number">34</span>:-<span class="Number">2</span>].<span class="ID">split</span>(<span class="String">"</span><span class="String">|</span><span class="String">"</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_17">  17</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_17"></span><span class="anchor" id="line-17-4"></span>    <span class="ID">chunks</span> = <span class="ID">re</span>.<span class="ID">split</span>(<span class="String">'</span><span class="String">\</span><span class="String">[(.*?)</span><span class="String">\</span><span class="String">]</span><span class="String">'</span>, <span class="ID">regex</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_18">  18</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_18"></span><span class="anchor" id="line-18-4"></span>    <span class="ID">pos</span> = <span class="Number">0</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_19">  19</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_19"></span><span class="anchor" id="line-19-4"></span>    <span class="ID">conds_or</span> = []</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_20">  20</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_20"></span><span class="anchor" id="line-20-4"></span>    <span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">0</span>, <span class="ResWord">len</span>(<span class="ID">chunks</span>)-<span class="Number">1</span>, <span class="Number">2</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_21">  21</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_21"></span><span class="anchor" id="line-21-4"></span>        <span class="ID">matched</span> = <span class="ResWord">False</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_22">  22</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_22"></span><span class="anchor" id="line-22-4"></span>        <span class="ResWord">if</span> <span class="ID">chunks</span>[<span class="ID">i</span>] == <span class="String">"</span><span class="String">"</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_23">  23</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_23"></span><span class="anchor" id="line-23-4"></span>            <span class="ID">matched</span> = <span class="ResWord">True</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_24">  24</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_24"></span><span class="anchor" id="line-24-4"></span>        <span class="ID">match</span> = <span class="ID">re</span>.<span class="ID">search</span>(<span class="String">"</span><span class="String">^</span><span class="String">\</span><span class="String">.</span><span class="String">\</span><span class="String">{(</span><span class="String">\</span><span class="String">d+)</span><span class="String">\</span><span class="String">}$</span><span class="String">"</span>, <span class="ID">chunks</span>[<span class="ID">i</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_25">  25</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_25"></span><span class="anchor" id="line-25-4"></span>        <span class="ResWord">if</span> <span class="ID">match</span> <span class="ResWord">is</span> <span class="ResWord">not</span> <span class="ResWord">None</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_26">  26</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_26"></span><span class="anchor" id="line-26-4"></span>            <span class="ID">pos</span> += <span class="ResWord">int</span>(<span class="ID">match</span>.<span class="ID">group</span>(<span class="Number">1</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_27">  27</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_27"></span><span class="anchor" id="line-27-4"></span>            <span class="ID">matched</span> = <span class="ResWord">True</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_28">  28</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_28"></span><span class="anchor" id="line-28-3"></span>        <span class="ID">match</span> = <span class="ID">re</span>.<span class="ID">search</span>(<span class="String">"</span><span class="String">^(</span><span class="String">\</span><span class="String">.+)$</span><span class="String">"</span>, <span class="ID">chunks</span>[<span class="ID">i</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_29">  29</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_29"></span><span class="anchor" id="line-29-3"></span>        <span class="ResWord">if</span> <span class="ID">match</span> <span class="ResWord">is</span> <span class="ResWord">not</span> <span class="ResWord">None</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_30">  30</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_30"></span><span class="anchor" id="line-30-3"></span>            <span class="ID">pos</span> += <span class="ResWord">len</span>(<span class="ID">match</span>.<span class="ID">group</span>(<span class="Number">1</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_31">  31</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_31"></span><span class="anchor" id="line-31-2"></span>            <span class="ID">matched</span> = <span class="ResWord">True</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_32">  32</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_32"></span><span class="anchor" id="line-32-2"></span>        <span class="ResWord">if</span> <span class="ResWord">not</span> <span class="ID">matched</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_33">  33</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_33"></span><span class="anchor" id="line-33-2"></span>            <span class="ResWord">print</span> <span class="String">"</span><span class="String">Error: </span><span class="String">%s</span><span class="SPChar">\n</span><span class="String">"</span> % <span class="ID">chunks</span>[<span class="ID">i</span>]</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_34">  34</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_34"></span><span class="anchor" id="line-34-2"></span>            <span class="ResWord">exit</span>(<span class="Number">1</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_35">  35</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_35"></span><span class="anchor" id="line-35-2"></span>            </span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_36">  36</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_36"></span><span class="anchor" id="line-36-2"></span>        <span class="ID">conds_and</span> = []</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_37">  37</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_37"></span><span class="anchor" id="line-37-2"></span>        <span class="ResWord">for</span> <span class="ID">c</span> <span class="ResWord">in</span> <span class="ResWord">map</span>(<span class="ResWord">str</span>, <span class="ID">chunks</span>[<span class="ID">i</span>+<span class="Number">1</span>]):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_38">  38</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_38"></span><span class="anchor" id="line-38-2"></span>            <span class="ID">conds_and</span>.<span class="ID">append</span>(<span class="ID">string</span>[<span class="ID">pos</span>] != <span class="ID">c2i</span>[<span class="ID">c</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_39">  39</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_39"></span><span class="anchor" id="line-39-2"></span>        <span class="ID">pos</span> += <span class="Number">1</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_40">  40</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_40"></span><span class="anchor" id="line-40-2"></span>        <span class="ID">conds_or</span>.<span class="ID">append</span>(<span class="ID">And</span>(<span class="ID">conds_and</span>))</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_41">  41</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_41"></span><span class="anchor" id="line-41-2"></span>                </span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_42">  42</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_42"></span><span class="anchor" id="line-42-2"></span>    <span class="ID">cond</span> = <span class="ID">Or</span>(<span class="ID">conds_or</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_43">  43</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_43"></span><span class="anchor" id="line-43-2"></span>    <span class="Comment">#print cond</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_44">  44</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_44"></span><span class="anchor" id="line-44-2"></span>    <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">cond</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_45">  45</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_45"></span><span class="anchor" id="line-45-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_46">  46</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_46"></span><span class="anchor" id="line-46-2"></span><span class="ID">s</span>.<span class="ID">check</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_47">  47</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_47"></span><span class="anchor" id="line-47-2"></span><span class="ID">m</span> = <span class="ID">s</span>.<span class="ID">model</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_48">  48</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_48"></span><span class="anchor" id="line-48-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_49">  49</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_49"></span><span class="anchor" id="line-49-1"></span><span class="ID">ans</span> = <span class="String">"</span><span class="String">"</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_50">  50</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_50"></span><span class="anchor" id="line-50-1"></span><span class="ResWord">for</span> <span class="ID">i</span> <span class="ResWord">in</span> <span class="ResWord">range</span>(<span class="Number">171</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_51">  51</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_51"></span><span class="anchor" id="line-51-1"></span>    <span class="ID">ans</span> += <span class="ID">i2c</span>[<span class="ID">m</span>[<span class="ID">string</span>[<span class="ID">i</span>]].<span class="ID">as_long</span>()]</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_52">  52</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_52"></span><span class="anchor" id="line-52-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_53">  53</a> </span><span class="LineAnchor" id="CA-a3e49e1be4d0fb147e27efff873631d61903d2c0_53"></span><span class="anchor" id="line-53-1"></span><span class="ResWord">print</span> <span class="ID">ans</span></span>
</pre></div></div><span class="anchor" id="line-811"></span><span class="anchor" id="line-812"></span><p class="line867">
</p><h3 id="A.2BZXRlcIoIdTtVT5hM-">整数計画問題</h3>
<span class="anchor" id="line-813"></span><p class="line874">Z3自体は特定の変数を最大化・最小化するようなモデルを求めるための機能を持たないが， <span class="anchor" id="line-814"></span>簡単な整数計画問題であれば，最適化したい変数に不等式の制約を与えて二分探索することにより以下のようにして解けることがある． <span class="anchor" id="line-815"></span>やはり専用に設計された線形計画問題・整数計画問題ソルバには遠く及ばないので，問題の規模が大きい時にはlp_solveなどの専用のソルバを用いるべきである． <span class="anchor" id="line-816"></span><span class="anchor" id="line-817"></span></p><p class="line874">WikipediaのLinear programmingのページにある問題を例に，価値を最大化する最適化問題を解くプログラムを以下に与える． <span class="anchor" id="line-818"></span><span class="anchor" id="line-819"></span><span class="anchor" id="line-820"></span><span class="anchor" id="line-821"></span><span class="anchor" id="line-822"></span><span class="anchor" id="line-823"></span><span class="anchor" id="line-824"></span><span class="anchor" id="line-825"></span><span class="anchor" id="line-826"></span><span class="anchor" id="line-827"></span><span class="anchor" id="line-828"></span><span class="anchor" id="line-829"></span><span class="anchor" id="line-830"></span><span class="anchor" id="line-831"></span><span class="anchor" id="line-832"></span><span class="anchor" id="line-833"></span><span class="anchor" id="line-834"></span><span class="anchor" id="line-835"></span><span class="anchor" id="line-836"></span><span class="anchor" id="line-837"></span><span class="anchor" id="line-838"></span><span class="anchor" id="line-839"></span><span class="anchor" id="line-840"></span><span class="anchor" id="line-841"></span><span class="anchor" id="line-842"></span><span class="anchor" id="line-843"></span><span class="anchor" id="line-844"></span><span class="anchor" id="line-845"></span><span class="anchor" id="line-846"></span><span class="anchor" id="line-847"></span><span class="anchor" id="line-848"></span><span class="anchor" id="line-849"></span><span class="anchor" id="line-850"></span><span class="anchor" id="line-851"></span><span class="anchor" id="line-852"></span><span class="anchor" id="line-853"></span><span class="anchor" id="line-854"></span><span class="anchor" id="line-855"></span><span class="anchor" id="line-856"></span><span class="anchor" id="line-857"></span><span class="anchor" id="line-858"></span><span class="anchor" id="line-859"></span><span class="anchor" id="line-860"></span><span class="anchor" id="line-861"></span><span class="anchor" id="line-862"></span><span class="anchor" id="line-863"></span><span class="anchor" id="line-864"></span><span class="anchor" id="line-865"></span><span class="anchor" id="line-866"></span><span class="anchor" id="line-867"></span><span class="anchor" id="line-868"></span><span class="anchor" id="line-869"></span><span class="anchor" id="line-870"></span><span class="anchor" id="line-871"></span><span class="anchor" id="line-872"></span><span class="anchor" id="line-873"></span><span class="anchor" id="line-874"></span><span class="anchor" id="line-875"></span><span class="anchor" id="line-876"></span><span class="anchor" id="line-877"></span><span class="anchor" id="line-878"></span><span class="anchor" id="line-879"></span><span class="anchor" id="line-880"></span><span class="anchor" id="line-881"></span><span class="anchor" id="line-882"></span><span class="anchor" id="line-1-119"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd\', 1, 1);" \
                class="codenumbers">行番号表示/非表示切替<\/a>');
</script><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#" onclick="return togglenumber(&#39;CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd&#39;, 1, 1);" class="codenumbers">行番号表示/非表示切替</a>
<pre dir="ltr" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd" lang="en"><span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_1">   1</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_1"></span><span class="anchor" id="line-1-120"></span><span class="ResWord">from</span> <span class="ID">z3</span> <span class="ResWord">import</span> *</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_2">   2</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_2"></span><span class="anchor" id="line-2-9"></span><span class="Comment"># example of http://en.wikipedia.org/wiki/Linear_programming</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_3">   3</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_3"></span><span class="anchor" id="line-3-9"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_4">   4</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_4"></span><span class="anchor" id="line-4-8"></span><span class="Comment"># initial conditions</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_5">   5</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_5"></span><span class="anchor" id="line-5-6"></span><span class="ID">A</span> = <span class="Number">100</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_6">   6</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_6"></span><span class="anchor" id="line-6-6"></span><span class="ID">F</span> = <span class="Number">500</span>; <span class="ID">Fs</span> = [<span class="Number">19</span>, <span class="Number">22</span>]</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_7">   7</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_7"></span><span class="anchor" id="line-7-6"></span><span class="ID">P</span> = <span class="Number">260</span>; <span class="ID">Ps</span> = [<span class="Number">16</span>, <span class="Number">13</span>]</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_8">   8</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_8"></span><span class="anchor" id="line-8-6"></span><span class="ID">Ss</span> = [<span class="Number">600</span>, <span class="Number">480</span>]</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_9">   9</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_9"></span><span class="anchor" id="line-9-6"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_10">  10</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_10"></span><span class="anchor" id="line-10-6"></span><span class="Comment"># return (satisfiability, model)</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_11">  11</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_11"></span><span class="anchor" id="line-11-6"></span><span class="ResWord">def</span> <span class="ID">maximize</span>(<span class="ID">s</span>, <span class="ID">v</span>):</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_12">  12</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_12"></span><span class="anchor" id="line-12-6"></span>    <span class="Comment"># Determine initial lower</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_13">  13</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_13"></span><span class="anchor" id="line-13-6"></span>    <span class="ID">r</span> = <span class="ID">s</span>.<span class="ID">check</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_14">  14</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_14"></span><span class="anchor" id="line-14-6"></span>    <span class="ResWord">if</span> <span class="ID">r</span> != <span class="ID">sat</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_15">  15</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_15"></span><span class="anchor" id="line-15-5"></span>        <span class="ResWord">return</span> <span class="ID">r</span>, <span class="ResWord">None</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_16">  16</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_16"></span><span class="anchor" id="line-16-5"></span>    <span class="ID">m</span> = <span class="ID">s</span>.<span class="ID">model</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_17">  17</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_17"></span><span class="anchor" id="line-17-5"></span>    <span class="ID">lower</span> = <span class="ID">m</span>[<span class="ID">v</span>].<span class="ID">as_long</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_18">  18</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_18"></span><span class="anchor" id="line-18-5"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_19">  19</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_19"></span><span class="anchor" id="line-19-5"></span>    <span class="Comment"># Find upper</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_20">  20</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_20"></span><span class="anchor" id="line-20-5"></span>    <span class="ID">upper</span> = <span class="ID">lower</span> + <span class="Number">128</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_21">  21</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_21"></span><span class="anchor" id="line-21-5"></span>    <span class="ResWord">while</span> <span class="ResWord">True</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_22">  22</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_22"></span><span class="anchor" id="line-22-5"></span>        <span class="ID">s</span>.<span class="ID">push</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_23">  23</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_23"></span><span class="anchor" id="line-23-5"></span>        <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">v</span> &gt;= <span class="ID">upper</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_24">  24</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_24"></span><span class="anchor" id="line-24-5"></span>        <span class="ID">r</span> = <span class="ID">s</span>.<span class="ID">check</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_25">  25</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_25"></span><span class="anchor" id="line-25-5"></span>        <span class="ID">s</span>.<span class="ID">pop</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_26">  26</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_26"></span><span class="anchor" id="line-26-5"></span>        <span class="ResWord">if</span> <span class="ID">r</span> == <span class="ID">unsat</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_27">  27</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_27"></span><span class="anchor" id="line-27-5"></span>            <span class="ResWord">break</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_28">  28</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_28"></span><span class="anchor" id="line-28-4"></span>        <span class="ResWord">elif</span> <span class="ID">r</span> == <span class="ID">unknown</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_29">  29</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_29"></span><span class="anchor" id="line-29-4"></span>            <span class="ResWord">return</span> <span class="ID">unknown</span>, <span class="ResWord">None</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_30">  30</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_30"></span><span class="anchor" id="line-30-4"></span>        <span class="ID">m</span> = <span class="ID">s</span>.<span class="ID">model</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_31">  31</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_31"></span><span class="anchor" id="line-31-3"></span>        <span class="ID">lower</span>, <span class="ID">upper</span> = <span class="ID">upper</span>, <span class="ID">upper</span> + (<span class="ID">upper</span> - <span class="ID">lower</span>) * <span class="Number">2</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_32">  32</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_32"></span><span class="anchor" id="line-32-3"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_33">  33</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_33"></span><span class="anchor" id="line-33-3"></span>    <span class="Comment"># max in [lower, upper)</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_34">  34</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_34"></span><span class="anchor" id="line-34-3"></span>    <span class="ResWord">while</span> <span class="ID">upper</span> - <span class="ID">lower</span> &gt; <span class="Number">1</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_35">  35</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_35"></span><span class="anchor" id="line-35-3"></span>        <span class="ID">mid</span> = (<span class="ID">lower</span> + <span class="ID">upper</span>) / <span class="Number">2</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_36">  36</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_36"></span><span class="anchor" id="line-36-3"></span>        <span class="ID">s</span>.<span class="ID">push</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_37">  37</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_37"></span><span class="anchor" id="line-37-3"></span>        <span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">v</span> &gt;= <span class="ID">mid</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_38">  38</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_38"></span><span class="anchor" id="line-38-3"></span>        <span class="ID">r</span> = <span class="ID">s</span>.<span class="ID">check</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_39">  39</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_39"></span><span class="anchor" id="line-39-3"></span>        <span class="ID">s</span>.<span class="ID">pop</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_40">  40</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_40"></span><span class="anchor" id="line-40-3"></span>        <span class="ResWord">if</span> <span class="ID">r</span> == <span class="ID">sat</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_41">  41</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_41"></span><span class="anchor" id="line-41-3"></span>            <span class="ID">lower</span> = <span class="ID">mid</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_42">  42</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_42"></span><span class="anchor" id="line-42-3"></span>            <span class="ID">m</span> = <span class="ID">s</span>.<span class="ID">model</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_43">  43</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_43"></span><span class="anchor" id="line-43-3"></span>        <span class="ResWord">elif</span> <span class="ID">r</span> == <span class="ID">unsat</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_44">  44</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_44"></span><span class="anchor" id="line-44-3"></span>            <span class="ID">upper</span> = <span class="ID">mid</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_45">  45</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_45"></span><span class="anchor" id="line-45-3"></span>        <span class="ResWord">else</span>:</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_46">  46</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_46"></span><span class="anchor" id="line-46-3"></span>            <span class="ResWord">return</span> <span class="ID">unknown</span>, <span class="ResWord">None</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_47">  47</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_47"></span><span class="anchor" id="line-47-3"></span>    <span class="ResWord">return</span> <span class="ID">sat</span>, <span class="ID">m</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_48">  48</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_48"></span><span class="anchor" id="line-48-3"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_49">  49</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_49"></span><span class="anchor" id="line-49-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_50">  50</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_50"></span><span class="anchor" id="line-50-2"></span><span class="ID">xs</span> = <span class="ID">IntVector</span>(<span class="String">"</span><span class="String">x</span><span class="String">"</span>, <span class="Number">2</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_51">  51</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_51"></span><span class="anchor" id="line-51-2"></span><span class="ID">v</span> = <span class="ID">Int</span>(<span class="String">"</span><span class="String">value</span><span class="String">"</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_52">  52</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_52"></span><span class="anchor" id="line-52-2"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_53">  53</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_53"></span><span class="anchor" id="line-53-2"></span><span class="ID">s</span> = <span class="ID">Solver</span>()</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_54">  54</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_54"></span><span class="anchor" id="line-54-1"></span><span class="Comment"># maximize variable</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_55">  55</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_55"></span><span class="anchor" id="line-55-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">v</span> == <span class="ID">Ss</span>[<span class="Number">0</span>]*<span class="ID">xs</span>[<span class="Number">0</span>] +<span class="ID">Ss</span>[<span class="Number">1</span>]*<span class="ID">xs</span>[<span class="Number">1</span>])</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_56">  56</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_56"></span><span class="anchor" id="line-56-1"></span><span class="Comment"># constraints</span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_57">  57</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_57"></span><span class="anchor" id="line-57-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">xs</span>[<span class="Number">0</span>] + <span class="ID">xs</span>[<span class="Number">1</span>] &lt;= <span class="ID">A</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_58">  58</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_58"></span><span class="anchor" id="line-58-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">Fs</span>[<span class="Number">0</span>]*<span class="ID">xs</span>[<span class="Number">0</span>] + <span class="ID">Fs</span>[<span class="Number">1</span>]*<span class="ID">xs</span>[<span class="Number">1</span>] &lt;= <span class="ID">F</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_59">  59</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_59"></span><span class="anchor" id="line-59-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">Ps</span>[<span class="Number">0</span>]*<span class="ID">xs</span>[<span class="Number">0</span>] + <span class="ID">Ps</span>[<span class="Number">1</span>]*<span class="ID">xs</span>[<span class="Number">1</span>] &lt;= <span class="ID">P</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_60">  60</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_60"></span><span class="anchor" id="line-60-1"></span><span class="ID">s</span>.<span class="ID">add</span>(<span class="ID">xs</span>[<span class="Number">0</span>] &gt;= <span class="Number">0</span>, <span class="ID">xs</span>[<span class="Number">1</span>] &gt;= <span class="Number">0</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_61">  61</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_61"></span><span class="anchor" id="line-61-1"></span></span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_62">  62</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_62"></span><span class="anchor" id="line-62-1"></span><span class="ID">r</span>, <span class="ID">m</span> = <span class="ID">maximize</span>(<span class="ID">s</span>, <span class="ID">v</span>)</span>
<span class="line"><span class="LineNumber"><a href="https://wiki.mma.club.uec.ac.jp/CTF/Toolkit/z3py#CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_63">  63</a> </span><span class="LineAnchor" id="CA-d935ee60c2143a6d7ee039be32c4f6ba13599efd_63"></span><span class="anchor" id="line-63-1"></span><span class="ResWord">print</span> <span class="ID">r</span>, <span class="ID">m</span></span>
</pre></div></div><span class="anchor" id="line-883"></span><span class="anchor" id="bottom"></span></div>
<p id="pageinfo" class="info" lang="ja" dir="ltr">CTF/Toolkit/z3py  (最終更新日時 2015-04-30 00:23:16 更新者 <span title="ytoku"><a href="https://wiki.mma.club.uec.ac.jp/ytoku" title="ytoku">ytoku</a></span>)</p>

<div id="pagebottom"></div>
</div>

<div id="footer">
<div id="credits">
<span><a title="About us." href="https://wiki.mma.club.uec.ac.jp/About">MMAについて</a></span><span><a title="Rules" href="https://wiki.mma.club.uec.ac.jp/Rules">会則・規則・ポリシー</a></span><span>Powered by <a title="Open Source Software credits." href="https://wiki.mma.club.uec.ac.jp/Legal">Open Source Softwares</a>.</span>
</div>


<div id="copyright" style="text-align: center; padding-top: 0.25em;">電気通信大学MMA ©2011- <img alt="cir DO cl NOT e-po SPAM st {at} mma {dot} club {dot} uec.ac.jp" src="./z3py_files/mailaddress.png" style="padding-left: 5px; border-left: 1px solid rgb(153, 153, 153);"></div>

</div>



<div style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Main, sans-serif;"></div></body></html>